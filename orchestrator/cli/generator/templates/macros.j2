{% macro optional(field, lifecycle) -%}
{% if python_version == "3.9" -%}
Optional[{{ field.type }}{{ lifecycle }}] = None
{%- else -%}
{{ field.type }} | None = {% if field.default is defined %} {{ field.default }}{% else %} None {% endif %}
{%- endif -%}
{%- endmacro %}

{% macro list_field(field, lifecycle) -%}
{% if field.list_type in ["int", "str"] -%}
{{ field.name }}: list[{{ field.list_type }}]
{%- else -%}
{{ field.name }}: ListOf{{ field.name | snake_to_camel }}[{{ field.list_type }}{{ lifecycle }}]
{%- endif -%}
{%- endmacro %}


{% macro product_block_field(field, lifecycles, lifecycle) -%}
{% if field.is_product_block -%}
{{ field.name }}: {% if field.required not in lifecycles -%} {{ optional(field, lifecycle) }} {% else -%} {{field.type}}{{lifecycle}} {% endif %}
{%- else -%}
{{ field.name }}: {% if field.required not in lifecycles -%} {{ optional(field) }} {% else -%} {{field.type}} {% endif %}
{%- endif -%}
{%- endmacro %}