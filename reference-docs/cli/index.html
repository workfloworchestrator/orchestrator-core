
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="An extensible workflow engine to manage customer facing resources and resource facing resources.">
      
      
      
        <link rel="canonical" href="https://workfloworchestrator.org/orchestrator-core/reference-docs/cli/">
      
      
        <link rel="prev" href="../auth-backend-and-frontend/">
      
      
        <link rel="next" href="../database/">
      
      
        
      
      
      <link rel="icon" href="../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.2">
    
    
      
        <title>CLI Tools - Workflow Orchestrator</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        
        <link rel="stylesheet" href="../../assets/external/fonts.googleapis.com/css.49ea35f2.css">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../css/termynal.css">
    
      <link rel="stylesheet" href="../../css/custom.css">
    
      <link rel="stylesheet" href="../../css/style.css">
    
      <link rel="stylesheet" href="../../css/markers.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  
<meta property="og:type" content="website" />
<meta property="og:title" content="CLI Tools - Workflow Orchestrator" />
<meta property="og:description" content="An extensible workflow engine to manage customer facing resources and resource facing resources." />
<meta property="og:image" content="https://workfloworchestrator.org/orchestrator-core/assets/images/social/reference-docs/cli.png" />
<meta property="og:image:type" content="image/png" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:url" content="https://workfloworchestrator.org/orchestrator-core/reference-docs/cli/" />
<meta property="twitter:card" content="summary_large_image" />
<meta property="twitter:title" content="CLI Tools - Workflow Orchestrator" />
<meta property="twitter:description" content="An extensible workflow engine to manage customer facing resources and resource facing resources." />
<meta property="twitter:image" content="https://workfloworchestrator.org/orchestrator-core/assets/images/social/reference-docs/cli.png" />
</head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#command-line-interface-commands" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Workflow Orchestrator" class="md-header__button md-logo" aria-label="Workflow Orchestrator" data-md-component="logo">
      
  <img src="../../img/WFO-Emblem-White.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Workflow Orchestrator
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              CLI Tools
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="amber"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 6a6 6 0 0 1 6 6c0 2.22-1.21 4.16-3 5.2V19a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1v-1.8c-1.79-1.04-3-2.98-3-5.2a6 6 0 0 1 6-6m2 15v1a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-1zm6-10h3v2h-3zM1 11h3v2H1zM13 1v3h-2V1zM4.92 3.5l2.13 2.14-1.42 1.41L3.5 4.93zm12.03 2.13 2.12-2.13 1.43 1.43-2.13 2.12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="amber"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="amber"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 2C5.13 2 2 5.13 2 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.87-3.13-7-7-7M6 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H6zm13-8h-2l-3.2 9h1.9l.7-2h3.2l.7 2h1.9zm-2.15 5.65L18 15l1.15 3.65z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/workfloworchestrator/orchestrator-core" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M202.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M496 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg>
  </div>
  <div class="md-source__repository">
    workfloworchestrator/orchestrator-core
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
  
    
  
  Workflow Orchestrator

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../getting-started/versions/" class="md-tabs__link">
          
  
  
    
  
  Guides

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../tldr/" class="md-tabs__link">
          
  
  
    
  
  Reference Documentation

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../workshops/advanced/overview/" class="md-tabs__link">
          
  
  
    
  
  Workshops

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../contributing/development/" class="md-tabs__link">
          
  
  
    
  
  Contributing

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Workflow Orchestrator" class="md-nav__button md-logo" aria-label="Workflow Orchestrator" data-md-component="logo">
      
  <img src="../../img/WFO-Emblem-White.png" alt="logo">

    </a>
    Workflow Orchestrator
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/workfloworchestrator/orchestrator-core" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M202.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M496 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg>
  </div>
  <div class="md-source__repository">
    workfloworchestrator/orchestrator-core
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../.." class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Workflow Orchestrator
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Workflow Orchestrator
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/framework/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Orchestrator Framework
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_3" >
        
          
          <label class="md-nav__link" for="__nav_1_3" id="__nav_1_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Orchestrator UI
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Orchestrator UI
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/orchestration/orchestrator-ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Orchestrator UI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_3_2" >
        
          
          <label class="md-nav__link" for="__nav_1_3_2" id="__nav_1_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    User input forms
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    User input forms
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/application/forms-frontend/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Generic solution
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_4" >
        
          
          <label class="md-nav__link" for="__nav_1_4" id="__nav_1_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Architecture
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/tldr/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Architecture; TL;DR
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/orchestration/philosophy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Orchestration Philosophy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/application/domainmodels/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Domain Models
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/application/workflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    How do Workflows work?
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_4_5" >
        
          
          <label class="md-nav__link" for="__nav_1_4_5" id="__nav_1_4_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Product modeling
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_4_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Product modeling
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/product_modelling/introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/product_modelling/standards/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Standards
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/product_modelling/modelling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Modelling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/product_modelling/context/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Context
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/product_modelling/terminology/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Terminology
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_4_5_6" >
        
          
          <label class="md-nav__link" for="__nav_1_4_5_6" id="__nav_1_4_5_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Example Product Models
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_4_5_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_4_5_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Example Product Models
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/product_modelling/node/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Node
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/product_modelling/port/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Port
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/product_modelling/l2_point_to_point/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L2 Point-to-Point
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/product_modelling/l2_vpn/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L2 VPN
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/product_modelling/ip_static/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IP Static
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/product_modelling/product_block_graph/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Product Block Graph
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Guides
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Guides
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/versions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Prerequisites
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_2" >
        
          
          <label class="md-nav__link" for="__nav_2_1_2" id="__nav_2_1_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Application
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Application
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/prepare-source-folder/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Preparing source folder
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/base/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Base application
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/agentic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Agentic application
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_3" >
        
          
          <label class="md-nav__link" for="__nav_2_1_3" id="__nav_2_1_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Workflows
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Workflows
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/workflows/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Creating a workflow
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/workflows#register-workflows" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Registering a workflow
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Docker
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/orchestration-ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Orchestrator UI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Product Modeling
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Product Modeling
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/product-modeling/imports/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Importing Existing Products
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/product-modeling/backfilling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Backfilling Existing Subscriptions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/tasks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Creating Tasks and Schedules
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/scaling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Scaling the Orchestrator
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/pause-and-resume/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pausing the Orchestrator
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6" >
        
          
          <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Upgrade Guides
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Upgrade Guides
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/upgrading/2.0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    v2.x
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/upgrading/3.0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    v3.x
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/upgrading/4.0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    v4.x
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/upgrading/4.7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    v4.7
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Reference Documentation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Reference Documentation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tldr/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    TL;DR
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    API docs
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    API docs
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rest API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../graphql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    GraphQL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../auth-backend-and-frontend/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Auth(n|z)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    CLI Tools
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    CLI Tools
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#db" class="md-nav__link">
    <span class="md-ellipsis">
      
        db
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="db">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#orchestrator.cli.database.downgrade" class="md-nav__link">
    <span class="md-ellipsis">
      
        downgrade
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orchestrator.cli.database.heads" class="md-nav__link">
    <span class="md-ellipsis">
      
        heads
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orchestrator.cli.database.history" class="md-nav__link">
    <span class="md-ellipsis">
      
        history
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orchestrator.cli.database.init" class="md-nav__link">
    <span class="md-ellipsis">
      
        init
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orchestrator.cli.database.merge" class="md-nav__link">
    <span class="md-ellipsis">
      
        merge
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orchestrator.cli.database.migrate_workflows" class="md-nav__link">
    <span class="md-ellipsis">
      
        migrate_workflows
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orchestrator.cli.database.migrate_tasks" class="md-nav__link">
    <span class="md-ellipsis">
      
        migrate_tasks
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orchestrator.cli.database.revision" class="md-nav__link">
    <span class="md-ellipsis">
      
        revision
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orchestrator.cli.database.upgrade" class="md-nav__link">
    <span class="md-ellipsis">
      
        upgrade
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#migrate-domain-models" class="md-nav__link">
    <span class="md-ellipsis">
      
        migrate-domain-models
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generate" class="md-nav__link">
    <span class="md-ellipsis">
      
        generate
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="generate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#config-file" class="md-nav__link">
    <span class="md-ellipsis">
      
        config file
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="config file">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#global-config-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        global config section
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#product-type-definition" class="md-nav__link">
    <span class="md-ellipsis">
      
        product type definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fixed_inputs-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        fixed_inputs section
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#product_blocks-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        product_blocks section
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#product-block-fields" class="md-nav__link">
    <span class="md-ellipsis">
      
        product block fields
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resource-type-types" class="md-nav__link">
    <span class="md-ellipsis">
      
        resource type types
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#workflows" class="md-nav__link">
    <span class="md-ellipsis">
      
        workflows
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#migration" class="md-nav__link">
    <span class="md-ellipsis">
      
        migration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#product" class="md-nav__link">
    <span class="md-ellipsis">
      
        product
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#product-blocks" class="md-nav__link">
    <span class="md-ellipsis">
      
        product-blocks
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unit-tests" class="md-nav__link">
    <span class="md-ellipsis">
      
        unit-tests
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#workflows_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        workflows
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scheduler" class="md-nav__link">
    <span class="md-ellipsis">
      
        scheduler
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="scheduler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#orchestrator.cli.scheduler.run" class="md-nav__link">
    <span class="md-ellipsis">
      
        run
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orchestrator.cli.scheduler.force" class="md-nav__link">
    <span class="md-ellipsis">
      
        force
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orchestrator.cli.scheduler.show_schedule" class="md-nav__link">
    <span class="md-ellipsis">
      
        show_schedule
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orchestrator.cli.scheduler.load_initial_schedule" class="md-nav__link">
    <span class="md-ellipsis">
      
        load_initial_schedule
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../database/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Database
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
        
          
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Domain Models
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Domain Models
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../domain_models/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6_2" >
        
          
          <label class="md-nav__link" for="__nav_3_6_2" id="__nav_3_6_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Domain Model Types
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Domain Model Types
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../domain_models/product_types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Product Types
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../domain_models/product_blocks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Product Blocks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../domain_models/model_attributes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Model Attributes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6_3" >
        
          
          <label class="md-nav__link" for="__nav_3_6_3" id="__nav_3_6_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Helpers
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Helpers
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../domain_models/generator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Generator
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../forms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Forms
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_8" >
        
          
          <label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Running the App
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Running the App
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../app/app/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    App.py
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../app/agentic-app/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Agentic App.py
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../python/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Python Version
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../app/settings-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Settings
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_9" >
        
          
          <label class="md-nav__link" for="__nav_3_9" id="__nav_3_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Workflows
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Workflows
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workflows/workflows/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Workflows
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workflows/workflow-steps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Workflow Steps
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workflows/callbacks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Callback step
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../websockets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Websockets
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../search/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Search
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_12" >
        
          
          <label class="md-nav__link" for="__nav_3_12" id="__nav_3_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Monitoring
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_12">
            <span class="md-nav__icon md-icon"></span>
            
  
    Monitoring
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../monitoring/error-tracking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Error Tracking
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../monitoring/metrics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Metrics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Workshops
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Workshops
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Example Orchestrator Workshop
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Example Orchestrator Workshop
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workshops/advanced/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_2" >
        
          
          <label class="md-nav__link" for="__nav_4_1_2" id="__nav_4_1_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Bootstrapping
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Bootstrapping
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workshops/advanced/bootstrap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting started
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workshops/advanced/execute-workflows/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Seeding data
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_3" >
        
          
          <label class="md-nav__link" for="__nav_4_1_3" id="__nav_4_1_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Products
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Products
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workshops/advanced/scenario/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Scenario
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workshops/advanced/domain-models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Domain models
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_4" >
        
          
          <label class="md-nav__link" for="__nav_4_1_4" id="__nav_4_1_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Workflows
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Workflows
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workshops/advanced/workflow-introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workshops/advanced/workflow-basics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Workflow Basics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_1_4_3" id="__nav_4_1_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Workflow Examples
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_1_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_4_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Workflow Examples
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workshops/advanced/node-create/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Create Workflow
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workshops/advanced/node-modify/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Modify Workflow
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workshops/advanced/node-terminate/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Terminate Workflow
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workshops/advanced/node-validate/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Validate Workflow
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_5" >
        
          
          <label class="md-nav__link" for="__nav_4_1_5" id="__nav_4_1_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Create your own product and workflows
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Create your own product and workflows
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workshops/advanced/create-your-own/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L2 Point-to-Point
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workshops/advanced/generator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Product and Workflow Generator
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Contributing
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/development/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Development setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/guidelines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Guidelines
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#db" class="md-nav__link">
    <span class="md-ellipsis">
      
        db
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="db">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#orchestrator.cli.database.downgrade" class="md-nav__link">
    <span class="md-ellipsis">
      
        downgrade
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orchestrator.cli.database.heads" class="md-nav__link">
    <span class="md-ellipsis">
      
        heads
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orchestrator.cli.database.history" class="md-nav__link">
    <span class="md-ellipsis">
      
        history
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orchestrator.cli.database.init" class="md-nav__link">
    <span class="md-ellipsis">
      
        init
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orchestrator.cli.database.merge" class="md-nav__link">
    <span class="md-ellipsis">
      
        merge
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orchestrator.cli.database.migrate_workflows" class="md-nav__link">
    <span class="md-ellipsis">
      
        migrate_workflows
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orchestrator.cli.database.migrate_tasks" class="md-nav__link">
    <span class="md-ellipsis">
      
        migrate_tasks
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orchestrator.cli.database.revision" class="md-nav__link">
    <span class="md-ellipsis">
      
        revision
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orchestrator.cli.database.upgrade" class="md-nav__link">
    <span class="md-ellipsis">
      
        upgrade
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#migrate-domain-models" class="md-nav__link">
    <span class="md-ellipsis">
      
        migrate-domain-models
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generate" class="md-nav__link">
    <span class="md-ellipsis">
      
        generate
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="generate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#config-file" class="md-nav__link">
    <span class="md-ellipsis">
      
        config file
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="config file">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#global-config-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        global config section
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#product-type-definition" class="md-nav__link">
    <span class="md-ellipsis">
      
        product type definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fixed_inputs-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        fixed_inputs section
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#product_blocks-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        product_blocks section
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#product-block-fields" class="md-nav__link">
    <span class="md-ellipsis">
      
        product block fields
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resource-type-types" class="md-nav__link">
    <span class="md-ellipsis">
      
        resource type types
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#workflows" class="md-nav__link">
    <span class="md-ellipsis">
      
        workflows
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#migration" class="md-nav__link">
    <span class="md-ellipsis">
      
        migration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#product" class="md-nav__link">
    <span class="md-ellipsis">
      
        product
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#product-blocks" class="md-nav__link">
    <span class="md-ellipsis">
      
        product-blocks
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unit-tests" class="md-nav__link">
    <span class="md-ellipsis">
      
        unit-tests
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#workflows_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        workflows
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scheduler" class="md-nav__link">
    <span class="md-ellipsis">
      
        scheduler
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="scheduler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#orchestrator.cli.scheduler.run" class="md-nav__link">
    <span class="md-ellipsis">
      
        run
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orchestrator.cli.scheduler.force" class="md-nav__link">
    <span class="md-ellipsis">
      
        force
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orchestrator.cli.scheduler.show_schedule" class="md-nav__link">
    <span class="md-ellipsis">
      
        show_schedule
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orchestrator.cli.scheduler.load_initial_schedule" class="md-nav__link">
    <span class="md-ellipsis">
      
        load_initial_schedule
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="command-line-interface-commands">Command Line Interface Commands</h1>
<p>This page documents CLI commands available in orchestrator-core.</p>
<p>The syntax of a CLI command is:</p>
<div class="highlight"><pre><span></span><code>python main.py &lt;command&gt; &lt;sub_command&gt;
</code></pre></div>
<p>Where:</p>
<ul>
<li><code>&lt;command&gt;</code> is one of the top-level headings in this page</li>
<li><code>&lt;sub_command&gt;</code> is one of the secondary headings in this page</li>
</ul>
<p>Some examples:</p>
<div class="highlight"><pre><span></span><code>python main.py db migrate_tasks

python main.py generate workflows

python main.py scheduler show-schedule
</code></pre></div>
<p>Each command can also be run with <code>--help</code> to get information directly in the CLI.</p>
<p>Top level options:</p>
<p><code>--install-completion [bash|zsh|fish|powershell|pwsh]</code></p>
<p>Install completion for the specified shell. [default: None]</p>
<p><code>--show-completion [bash|zsh|fish|powershell|pwsh]</code></p>
<p>Show completion for the specified shell, to copy it or customize the
installation. [default: None]</p>
<h2 id="db">db</h2>
<p>Interact with the application database. By default, does nothing, specify <code>main.py db --help</code> for more information.</p>


<div class="doc doc-object doc-module">




    <div class="doc doc-contents first">










<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="orchestrator.cli.database.downgrade" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">downgrade</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>The <code>downgrade</code> command will downgrade the database to the previous revision or to the optionally specified revision.</p>


<details class="cli-options" open>
  <summary>CLI Options</summary>
  <div class="highlight"><pre><span></span><code>Arguments:
<span class="w">    </span><span class="o">[</span>REVISION<span class="o">]</span><span class="w">  </span>Rev<span class="w"> </span>id<span class="w"> </span>to<span class="w"> </span>upgrade<span class="w"> </span>to<span class="w">  </span><span class="o">[</span>default:<span class="w"> </span>-1<span class="o">]</span>
</code></pre></div>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>orchestrator/cli/database.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">downgrade</span><span class="p">(</span><span class="n">revision</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Argument</span><span class="p">(</span><span class="s2">&quot;-1&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Rev id to downgrade to&quot;</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The `downgrade` command will downgrade the database to the previous revision or to the optionally specified revision.</span>

<span class="sd">    Args:</span>
<span class="sd">        revision (str, optional): Optional argument to indicate where to downgrade to. [default: -1]</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>

<span class="sd">    CLI Options:</span>
<span class="sd">        ```sh</span>
<span class="sd">        Arguments:</span>
<span class="sd">            [REVISION]  Rev id to upgrade to  [default: -1]</span>
<span class="sd">        ```</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">command</span><span class="o">.</span><span class="n">downgrade</span><span class="p">(</span><span class="n">alembic_cfg</span><span class="p">(),</span> <span class="n">revision</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="orchestrator.cli.database.heads" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">heads</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>The <code>heads</code> command command shows the Alembic database heads.</p>


<details class="cli-options" open>
  <summary>CLI Options</summary>
  <p>None</p>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>orchestrator/cli/database.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="n">help</span><span class="o">=</span><span class="s2">&quot;Get the database heads&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">heads</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The `heads` command command shows the Alembic database heads.</span>

<span class="sd">    CLI Options:</span>
<span class="sd">        None</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">command</span><span class="o">.</span><span class="n">heads</span><span class="p">(</span><span class="n">alembic_cfg</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="orchestrator.cli.database.history" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">history</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>The <code>history</code> command lists Alembic revision history/changeset scripts in chronological order.</p>


<details class="cli-options" open>
  <summary>CLI Options</summary>
  <div class="highlight"><pre><span></span><code>Options:
<span class="w">    </span>-v,<span class="w"> </span>--verbose<span class="w">  </span>Verbose<span class="w"> </span>output
<span class="w">    </span>-c,<span class="w"> </span>--current<span class="w">  </span>Indicate<span class="w"> </span>current<span class="w"> </span>revision
</code></pre></div>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>orchestrator/cli/database.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">history</span><span class="p">(</span>
    <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;--verbose&quot;</span><span class="p">,</span> <span class="s2">&quot;-v&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Verbose output&quot;</span><span class="p">),</span>
    <span class="n">indicate_current</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;--current&quot;</span><span class="p">,</span> <span class="s2">&quot;-c&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Indicate current revision&quot;</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The `history` command lists Alembic revision history/changeset scripts in chronological order.</span>

<span class="sd">    Args:</span>
<span class="sd">        verbose (bool, optional): Verbose output</span>
<span class="sd">        indicate_current (bool, optional): Indicate current revision</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>

<span class="sd">    CLI Options:</span>
<span class="sd">        ```sh</span>
<span class="sd">        Options:</span>
<span class="sd">            -v, --verbose  Verbose output</span>
<span class="sd">            -c, --current  Indicate current revision</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">command</span><span class="o">.</span><span class="n">history</span><span class="p">(</span><span class="n">alembic_cfg</span><span class="p">(),</span> <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span> <span class="n">indicate_current</span><span class="o">=</span><span class="n">indicate_current</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="orchestrator.cli.database.init" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">init</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Initialize the <code>migrations</code> directory.</p>
<p>This command will initialize a migration directory for the orchestrator core application and setup a correct
migration environment. It will also throw an exception when it detects conflicting files and directories.</p>


<details class="cli-options" open>
  <summary>CLI Options</summary>
  <p>None</p>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>orchestrator/cli/database.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span>
    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Initialize an empty migrations environment. This command will throw an exception when it detects conflicting files and directories.&quot;</span>
<span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">init</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the `migrations` directory.</span>

<span class="sd">    This command will initialize a migration directory for the orchestrator core application and setup a correct</span>
<span class="sd">    migration environment. It will also throw an exception when it detects conflicting files and directories.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>

<span class="sd">    CLI Options:</span>
<span class="sd">        None</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">access</span><span class="p">(</span><span class="n">migration_dir</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">F_OK</span><span class="p">)</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">migration_dir</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">OSError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Directory </span><span class="si">{</span><span class="n">migration_dir</span><span class="si">}</span><span class="s2"> already exists and is not empty&quot;</span><span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Creating directory&quot;</span><span class="p">,</span> <span class="n">directory</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">migration_dir</span><span class="p">))</span>
    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">migration_dir</span><span class="p">)</span>
    <span class="n">versions</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">migration_dir</span><span class="p">,</span> <span class="s2">&quot;versions&quot;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Creating directory&quot;</span><span class="p">,</span> <span class="n">directory</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">versions</span><span class="p">))</span>
    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">versions</span><span class="p">)</span>
    <span class="n">versions_schema</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">migration_dir</span><span class="p">,</span> <span class="s2">&quot;versions/schema&quot;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Creating directory&quot;</span><span class="p">,</span> <span class="n">directory</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">versions_schema</span><span class="p">))</span>
    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">versions_schema</span><span class="p">)</span>

    <span class="n">source_env_py</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">orchestrator_module_location</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">migration_dir</span><span class="si">}</span><span class="s2">/templates/env.py.j2&quot;</span><span class="p">)</span>
    <span class="n">env_py</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">migration_dir</span><span class="p">,</span> <span class="s2">&quot;env.py&quot;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Creating file&quot;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">env_py</span><span class="p">))</span>
    <span class="n">copyfile</span><span class="p">(</span><span class="n">source_env_py</span><span class="p">,</span> <span class="n">env_py</span><span class="p">)</span>

    <span class="n">source_script_py_mako</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">orchestrator_module_location</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">migration_dir</span><span class="si">}</span><span class="s2">/script.py.mako&quot;</span><span class="p">)</span>
    <span class="n">script_py_mako</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">migration_dir</span><span class="p">,</span> <span class="s2">&quot;script.py.mako&quot;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Creating file&quot;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">script_py_mako</span><span class="p">))</span>
    <span class="n">copyfile</span><span class="p">(</span><span class="n">source_script_py_mako</span><span class="p">,</span> <span class="n">script_py_mako</span><span class="p">)</span>

    <span class="n">source_helpers_py</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">orchestrator_module_location</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">migration_dir</span><span class="si">}</span><span class="s2">/templates/helpers.py.j2&quot;</span><span class="p">)</span>
    <span class="n">helpers_py</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">migration_dir</span><span class="p">,</span> <span class="s2">&quot;helpers.py&quot;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Creating file&quot;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">helpers_py</span><span class="p">))</span>
    <span class="n">copyfile</span><span class="p">(</span><span class="n">source_helpers_py</span><span class="p">,</span> <span class="n">helpers_py</span><span class="p">)</span>

    <span class="n">template</span> <span class="o">=</span> <span class="n">jinja_env</span><span class="o">.</span><span class="n">get_template</span><span class="p">(</span><span class="s2">&quot;alembic.ini.j2&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">access</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="s2">&quot;alembic.ini&quot;</span><span class="p">),</span> <span class="n">os</span><span class="o">.</span><span class="n">F_OK</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Creating file&quot;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="s2">&quot;alembic.ini&quot;</span><span class="p">))</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="s2">&quot;alembic.ini&quot;</span><span class="p">),</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">alembic_ini</span><span class="p">:</span>
            <span class="n">alembic_ini</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">migrations_dir</span><span class="o">=</span><span class="n">migration_dir</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Skipping Alembic.ini file. It already exists&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="orchestrator.cli.database.merge" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">merge</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Merge database revisions.</p>
<p>It is possible when using multiple git branches in your <abbr title="Workflow Orchestrator">WFO</abbr> development lifecycle to have
multiple Alembic heads emerge. This command will allow you to merge those two (or more)
heads to resolve the issue. You also might need to run this after updating your version
of orchestrator-core if there have been schema changes.</p>
<p><a href="https://alembic.sqlalchemy.org/en/latest/branches.html#merging-branches">Read More Here</a></p>


<details class="cli-options" open>
  <summary>CLI Options</summary>
  <div class="highlight"><pre><span></span><code>Arguments:
<span class="w">    </span><span class="o">[</span>REVISIONS<span class="o">]</span><span class="w">  </span>Add<span class="w"> </span>the<span class="w"> </span>revision<span class="w"> </span>you<span class="w"> </span>would<span class="w"> </span>like<span class="w"> </span>to<span class="w"> </span>merge<span class="w"> </span>to<span class="w"> </span>this<span class="w"> </span>command.

Options:
<span class="w">    </span>-m,<span class="w"> </span>--message<span class="w"> </span>TEXT<span class="w">  </span>The<span class="w"> </span>revision<span class="w"> </span>message
</code></pre></div>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>orchestrator/cli/database.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="n">help</span><span class="o">=</span><span class="s2">&quot;Merge database revisions.&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">merge</span><span class="p">(</span>
    <span class="n">revisions</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Argument</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Add the revision you would like to merge to this command.&quot;</span><span class="p">),</span>
    <span class="n">message</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;--message&quot;</span><span class="p">,</span> <span class="s2">&quot;-m&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;The revision message&quot;</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Merge database revisions.</span>

<span class="sd">    It is possible when using multiple git branches in your WFO development lifecycle to have</span>
<span class="sd">    multiple Alembic heads emerge. This command will allow you to merge those two (or more)</span>
<span class="sd">    heads to resolve the issue. You also might need to run this after updating your version</span>
<span class="sd">    of orchestrator-core if there have been schema changes.</span>

<span class="sd">    [Read More Here](https://alembic.sqlalchemy.org/en/latest/branches.html#merging-branches)</span>

<span class="sd">    Args:</span>
<span class="sd">        revisions: List of revisions to merge</span>
<span class="sd">        message: Optional message for the revision.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>

<span class="sd">    CLI Options:</span>
<span class="sd">        ```sh</span>
<span class="sd">        Arguments:</span>
<span class="sd">            [REVISIONS]  Add the revision you would like to merge to this command.</span>

<span class="sd">        Options:</span>
<span class="sd">            -m, --message TEXT  The revision message</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">command</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">alembic_cfg</span><span class="p">(),</span> <span class="n">revisions</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="orchestrator.cli.database.migrate_workflows" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">migrate_workflows</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>The <code>migrate-workflows</code> command creates a migration file based on the difference between workflows in the database and registered WorkflowInstances in your codebase.</p>
<div class="admonition warning">
<p class="admonition-title">BACKUP YOUR DATABASE BEFORE USING THE MIGRATION!</p>
</div>
<p>You will be prompted with inputs for new models and resource type updates.
Resource type updates are only handled when it's renamed in all product blocks.</p>
        <p>Returns None unless <code>--test</code> is used, in which case it returns:
    - tuple:
        - list of upgrade SQL statements in string format.
        - list of downgrade SQL statements in string format.</p>


<details class="cli-arguments" open>
  <summary>CLI Arguments</summary>
  <div class="highlight"><pre><span></span><code>Arguments:
<span class="w">    </span>MESSAGE<span class="w">  </span>Migration<span class="w"> </span>name<span class="w">  </span><span class="o">[</span>required<span class="o">]</span>

Options:
<span class="w">    </span>--test<span class="w"> </span>/<span class="w"> </span>--no-test<span class="w">  </span>Optional<span class="w"> </span>boolean<span class="w"> </span><span class="k">if</span><span class="w"> </span>you<span class="w"> </span>don<span class="err">&#39;</span>t<span class="w"> </span>want<span class="w"> </span>to<span class="w"> </span>generate<span class="w"> </span>a<span class="w"> </span>migration
<span class="w">    </span>file<span class="w">  </span><span class="o">[</span>default:<span class="w"> </span>no-test<span class="o">]</span>
</code></pre></div>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>orchestrator/cli/database.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="n">help</span><span class="o">=</span><span class="s2">&quot;Create migration file based on diff workflows in db&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">migrate_workflows</span><span class="p">(</span>
    <span class="n">message</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Argument</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Migration name&quot;</span><span class="p">),</span>
    <span class="n">test</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Optional boolean if you don&#39;t want to generate a migration file&quot;</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">],</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">]]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The `migrate-workflows` command creates a migration file based on the difference between workflows in the database and registered WorkflowInstances in your codebase.</span>

<span class="sd">    !!! warning &quot;BACKUP YOUR DATABASE BEFORE USING THE MIGRATION!&quot;</span>

<span class="sd">    You will be prompted with inputs for new models and resource type updates.</span>
<span class="sd">    Resource type updates are only handled when it&#39;s renamed in all product blocks.</span>

<span class="sd">    Args:</span>
<span class="sd">        message: Message/description of the generated migration.</span>
<span class="sd">        test: Optional boolean if you don&#39;t want to generate a migration file.</span>

<span class="sd">    Returns None unless `--test` is used, in which case it returns:</span>
<span class="sd">        - tuple:</span>
<span class="sd">            - list of upgrade SQL statements in string format.</span>
<span class="sd">            - list of downgrade SQL statements in string format.</span>

<span class="sd">    CLI Arguments:</span>
<span class="sd">        ```sh</span>
<span class="sd">        Arguments:</span>
<span class="sd">            MESSAGE  Migration name  [required]</span>

<span class="sd">        Options:</span>
<span class="sd">            --test / --no-test  Optional boolean if you don&#39;t want to generate a migration</span>
<span class="sd">            file  [default: no-test]</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">app_settings</span><span class="o">.</span><span class="n">TESTING</span><span class="p">:</span>
        <span class="n">init_database</span><span class="p">(</span><span class="n">app_settings</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">test</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span>  <span class="c1"># noqa: T001, T201</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">str_fmt</span><span class="p">(</span><span class="s1">&#39;NOTE:&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">flags</span><span class="o">=</span><span class="p">[</span><span class="n">COLOR</span><span class="o">.</span><span class="n">BOLD</span><span class="p">,</span><span class="w"> </span><span class="n">COLOR</span><span class="o">.</span><span class="n">CYAN</span><span class="p">])</span><span class="si">}</span><span class="s2"> Running in test mode. No migration file will be generated.</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="n">workflows_to_add</span><span class="p">,</span> <span class="n">workflows_to_delete</span> <span class="o">=</span> <span class="n">create_workflows_migration_wizard</span><span class="p">()</span>

    <span class="c1"># String &#39;template&#39; arguments</span>
    <span class="n">import_str</span> <span class="o">=</span> <span class="s2">&quot;from orchestrator.migrations.helpers import create_workflow, delete_workflow</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="n">tpl_preamble_lines</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">tpl_upgrade_lines</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">tpl_downgrade_lines</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">if</span> <span class="n">workflows_to_add</span><span class="p">:</span>
        <span class="n">tpl_preamble_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;new_workflows = </span><span class="si">{</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">workflows_to_add</span><span class="p">,</span><span class="w"> </span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">tpl_upgrade_lines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
            <span class="p">[(</span><span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="mi">4</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;for workflow in new_workflows:&quot;</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="mi">8</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;create_workflow(conn, workflow)&quot;</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="n">tpl_downgrade_lines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
            <span class="p">[(</span><span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="mi">4</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;for workflow in new_workflows:&quot;</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="mi">8</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;delete_workflow(conn, workflow[&quot;name&quot;])&#39;</span><span class="p">]</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">workflows_to_delete</span><span class="p">:</span>
        <span class="n">tpl_preamble_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;old_workflows = </span><span class="si">{</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">workflows_to_delete</span><span class="p">,</span><span class="w"> </span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">tpl_upgrade_lines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
            <span class="p">[(</span><span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="mi">4</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;for workflow in old_workflows:&quot;</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="mi">8</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;delete_workflow(conn, workflow[&quot;name&quot;])&#39;</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="n">tpl_downgrade_lines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
            <span class="p">[(</span><span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="mi">4</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;for workflow in old_workflows:&quot;</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="mi">8</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;create_workflow(conn, workflow)&quot;</span><span class="p">]</span>
        <span class="p">)</span>

    <span class="n">preamble</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="n">import_str</span><span class="p">,</span>
            <span class="o">*</span><span class="n">tpl_preamble_lines</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">)</span>
    <span class="n">sql_upgrade_str</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tpl_upgrade_lines</span><span class="p">)</span>
    <span class="n">sql_downgrade_str</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tpl_downgrade_lines</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">test</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">workflows_to_add</span><span class="p">,</span> <span class="n">workflows_to_delete</span>

    <span class="n">create_migration_file</span><span class="p">(</span><span class="n">alembic_cfg</span><span class="p">(),</span> <span class="n">sql_upgrade_str</span><span class="p">,</span> <span class="n">sql_downgrade_str</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">preamble</span><span class="o">=</span><span class="n">preamble</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="orchestrator.cli.database.migrate_tasks" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">migrate_tasks</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>The <code>migrate-tasks</code> command creates a migration file based on the difference between tasks in the database and registered TaskInstances in your codebase.</p>
<div class="admonition warning">
<p class="admonition-title">BACKUP YOUR DATABASE BEFORE USING THE MIGRATION!</p>
</div>
<p>You will be prompted with inputs for new models and resource type updates.
Resource type updates are only handled when it's renamed in all product blocks.</p>
        <p>Returns None unless <code>--test</code> is used, in which case it returns:
    - tuple:
        - list of upgrade SQL statements in string format.
        - list of downgrade SQL statements in string format.</p>


<details class="cli-arguments" open>
  <summary>CLI Arguments</summary>
  <div class="highlight"><pre><span></span><code>Arguments:
<span class="w">    </span>MESSAGE<span class="w">  </span>Migration<span class="w"> </span>name<span class="w">  </span><span class="o">[</span>required<span class="o">]</span>

Options:
<span class="w">    </span>--test<span class="w"> </span>/<span class="w"> </span>--no-test<span class="w">  </span>Optional<span class="w"> </span>boolean<span class="w"> </span><span class="k">if</span><span class="w"> </span>you<span class="w"> </span>don<span class="err">&#39;</span>t<span class="w"> </span>want<span class="w"> </span>to<span class="w"> </span>generate<span class="w"> </span>a<span class="w"> </span>migration
<span class="w">    </span>file<span class="w">  </span><span class="o">[</span>default:<span class="w"> </span>no-test<span class="o">]</span>
</code></pre></div>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>orchestrator/cli/database.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="n">help</span><span class="o">=</span><span class="s2">&quot;Create migration file based on diff tasks in db&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">migrate_tasks</span><span class="p">(</span>
    <span class="n">message</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Argument</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Migration name&quot;</span><span class="p">),</span>
    <span class="n">test</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Optional boolean if you don&#39;t want to generate a migration file&quot;</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">],</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">]]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The `migrate-tasks` command creates a migration file based on the difference between tasks in the database and registered TaskInstances in your codebase.</span>

<span class="sd">    !!! warning &quot;BACKUP YOUR DATABASE BEFORE USING THE MIGRATION!&quot;</span>

<span class="sd">    You will be prompted with inputs for new models and resource type updates.</span>
<span class="sd">    Resource type updates are only handled when it&#39;s renamed in all product blocks.</span>

<span class="sd">    Args:</span>
<span class="sd">        message: Message/description of the generated migration.</span>
<span class="sd">        test: Optional boolean if you don&#39;t want to generate a migration file.</span>

<span class="sd">    Returns None unless `--test` is used, in which case it returns:</span>
<span class="sd">        - tuple:</span>
<span class="sd">            - list of upgrade SQL statements in string format.</span>
<span class="sd">            - list of downgrade SQL statements in string format.</span>

<span class="sd">    CLI Arguments:</span>
<span class="sd">        ```sh</span>
<span class="sd">        Arguments:</span>
<span class="sd">            MESSAGE  Migration name  [required]</span>

<span class="sd">        Options:</span>
<span class="sd">            --test / --no-test  Optional boolean if you don&#39;t want to generate a migration</span>
<span class="sd">            file  [default: no-test]</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">app_settings</span><span class="o">.</span><span class="n">TESTING</span><span class="p">:</span>
        <span class="n">init_database</span><span class="p">(</span><span class="n">app_settings</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">test</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span>  <span class="c1"># noqa: T001, T201</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">str_fmt</span><span class="p">(</span><span class="s1">&#39;NOTE:&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">flags</span><span class="o">=</span><span class="p">[</span><span class="n">COLOR</span><span class="o">.</span><span class="n">BOLD</span><span class="p">,</span><span class="w"> </span><span class="n">COLOR</span><span class="o">.</span><span class="n">CYAN</span><span class="p">])</span><span class="si">}</span><span class="s2"> Running in test mode. No migration file will be generated.</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="n">tasks_to_add</span><span class="p">,</span> <span class="n">tasks_to_delete</span> <span class="o">=</span> <span class="n">create_tasks_migration_wizard</span><span class="p">()</span>

    <span class="c1"># String &#39;template&#39; arguments</span>
    <span class="n">import_str</span> <span class="o">=</span> <span class="s2">&quot;from orchestrator.migrations.helpers import create_task, delete_workflow</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="n">tpl_preamble_lines</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">tpl_upgrade_lines</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">tpl_downgrade_lines</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">if</span> <span class="n">tasks_to_add</span><span class="p">:</span>
        <span class="n">tpl_preamble_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;new_tasks = </span><span class="si">{</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">tasks_to_add</span><span class="p">,</span><span class="w"> </span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">tpl_upgrade_lines</span><span class="o">.</span><span class="n">extend</span><span class="p">([(</span><span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="mi">4</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;for task in new_tasks:&quot;</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="mi">8</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;create_task(conn, task)&quot;</span><span class="p">])</span>
        <span class="n">tpl_downgrade_lines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
            <span class="p">[(</span><span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="mi">4</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;for task in new_tasks:&quot;</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="mi">8</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;delete_workflow(conn, task[&quot;name&quot;])&#39;</span><span class="p">]</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">tasks_to_delete</span><span class="p">:</span>
        <span class="n">tpl_preamble_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;old_tasks = </span><span class="si">{</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">tasks_to_delete</span><span class="p">,</span><span class="w"> </span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">tpl_upgrade_lines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
            <span class="p">[(</span><span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="mi">4</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;for task in old_tasks:&quot;</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="mi">8</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;delete_workflow(conn, task[&quot;name&quot;])&#39;</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="n">tpl_downgrade_lines</span><span class="o">.</span><span class="n">extend</span><span class="p">([(</span><span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="mi">4</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;for task in old_tasks:&quot;</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="mi">8</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;create_task(conn, task)&quot;</span><span class="p">])</span>

    <span class="n">preamble</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="n">import_str</span><span class="p">,</span>
            <span class="o">*</span><span class="n">tpl_preamble_lines</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">)</span>
    <span class="n">sql_upgrade_str</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tpl_upgrade_lines</span><span class="p">)</span>
    <span class="n">sql_downgrade_str</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tpl_downgrade_lines</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">test</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">tasks_to_add</span><span class="p">,</span> <span class="n">tasks_to_delete</span>

    <span class="n">create_migration_file</span><span class="p">(</span><span class="n">alembic_cfg</span><span class="p">(),</span> <span class="n">sql_upgrade_str</span><span class="p">,</span> <span class="n">sql_downgrade_str</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">preamble</span><span class="o">=</span><span class="n">preamble</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="orchestrator.cli.database.revision" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">revision</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>The <code>revision</code> command creates a new Alembic revision file.</p>


<details class="cli-options" open>
  <summary>CLI Options</summary>
  <div class="highlight"><pre><span></span><code>Options:
<span class="w">    </span>-m,<span class="w"> </span>--message<span class="w"> </span>TEXT<span class="w">              </span>The<span class="w"> </span>revision<span class="w"> </span>message
<span class="w">    </span>--version-path<span class="w"> </span>TEXT<span class="w">             </span>Specify<span class="w"> </span>specific<span class="w"> </span>path<span class="w"> </span>from<span class="w"> </span>config<span class="w"> </span><span class="k">for</span><span class="w"> </span>version<span class="w"> </span>file
<span class="w">    </span>--autogenerate<span class="w"> </span>/<span class="w"> </span>--no-autogenerate
<span class="w">                                    </span>Detect<span class="w"> </span>schema<span class="w"> </span>changes<span class="w"> </span>and<span class="w"> </span>add<span class="w"> </span>migrations<span class="w"> </span><span class="o">[</span>default:<span class="w"> </span>no-autogenerate<span class="o">]</span>
<span class="w">    </span>--head<span class="w"> </span>TEXT<span class="w">                     </span>Determine<span class="w"> </span>the<span class="w"> </span>head<span class="w"> </span>you<span class="w"> </span>need<span class="w"> </span>to<span class="w"> </span>add<span class="w"> </span>your<span class="w"> </span>migration<span class="w"> </span>to.
</code></pre></div>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>orchestrator/cli/database.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">revision</span><span class="p">(</span>
    <span class="n">message</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;--message&quot;</span><span class="p">,</span> <span class="s2">&quot;-m&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;The revision message&quot;</span><span class="p">),</span>
    <span class="n">version_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;--version-path&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Specify specific path from config for version file&quot;</span><span class="p">),</span>
    <span class="n">autogenerate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Detect schema changes and add migrations&quot;</span><span class="p">),</span>
    <span class="n">head</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span><span class="s2">&quot;data@head&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Determine the head you need to add your migration to.&quot;</span><span class="p">),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The `revision` command creates a new Alembic revision file.</span>

<span class="sd">    Args:</span>
<span class="sd">        message: The revision message</span>
<span class="sd">        version_path: Specify specific path from config for version file</span>
<span class="sd">        autogenerate: Whether to detect schema changes.</span>
<span class="sd">        head: To which head the migration applies</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>

<span class="sd">    CLI Options:</span>
<span class="sd">        ```sh</span>
<span class="sd">        Options:</span>
<span class="sd">            -m, --message TEXT              The revision message</span>
<span class="sd">            --version-path TEXT             Specify specific path from config for version file</span>
<span class="sd">            --autogenerate / --no-autogenerate</span>
<span class="sd">                                            Detect schema changes and add migrations [default: no-autogenerate]</span>
<span class="sd">            --head TEXT                     Determine the head you need to add your migration to.</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">create_data_head_if_not_exists</span><span class="p">({</span><span class="s2">&quot;writer&quot;</span><span class="p">:</span> <span class="n">create_writer</span><span class="p">(),</span> <span class="s2">&quot;environment&quot;</span><span class="p">:</span> <span class="n">get_template_environment</span><span class="p">()})</span>
    <span class="n">command</span><span class="o">.</span><span class="n">revision</span><span class="p">(</span><span class="n">alembic_cfg</span><span class="p">(),</span> <span class="n">message</span><span class="p">,</span> <span class="n">version_path</span><span class="o">=</span><span class="n">version_path</span><span class="p">,</span> <span class="n">autogenerate</span><span class="o">=</span><span class="n">autogenerate</span><span class="p">,</span> <span class="n">head</span><span class="o">=</span><span class="n">head</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="orchestrator.cli.database.upgrade" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">upgrade</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>The <code>upgrade</code> command will upgrade the database to the specified revision.</p>


<details class="cli-options" open>
  <summary>CLI Options</summary>
  <div class="highlight"><pre><span></span><code>Arguments:
<span class="w">    </span><span class="o">[</span>REVISION<span class="o">]</span><span class="w">  </span>Rev<span class="w"> </span>id<span class="w"> </span>to<span class="w"> </span>upgrade<span class="w"> </span>to

Options:
<span class="w">    </span>--help<span class="w">  </span>Show<span class="w"> </span>this<span class="w"> </span>message<span class="w"> </span>and<span class="w"> </span>exit.
</code></pre></div>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>orchestrator/cli/database.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">upgrade</span><span class="p">(</span><span class="n">revision</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Argument</span><span class="p">(</span><span class="n">help</span><span class="o">=</span><span class="s2">&quot;Rev id to upgrade to&quot;</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The `upgrade` command will upgrade the database to the specified revision.</span>

<span class="sd">    Args:</span>
<span class="sd">        revision: Optional argument to indicate where to upgrade to.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>

<span class="sd">    CLI Options:</span>
<span class="sd">        ```sh</span>
<span class="sd">        Arguments:</span>
<span class="sd">            [REVISION]  Rev id to upgrade to</span>

<span class="sd">        Options:</span>
<span class="sd">            --help  Show this message and exit.</span>
<span class="sd">        ```</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">command</span><span class="o">.</span><span class="n">upgrade</span><span class="p">(</span><span class="n">alembic_cfg</span><span class="p">(),</span> <span class="n">revision</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h3 id="migrate-domain-models">migrate-domain-models</h3>
<p>The <code>main.py db migrate-domain-models</code> command creates a revision based on the
difference between domain models in the source code and those that are defined
in the database.</p>
<p>Arguments</p>
<p>message - Migration name [default: None][required]</p>
<p>Options</p>
<p>--test | --no-test - Optional boolean if you don't want to generate a
migration file [default: no-test]
--inputs -  stringified dict to prefill inputs [default: {}]
--updates - stringified dict to map updates instead of
using inputs [default: {}]</p>
<p>The <code>python main.py db migrate-domain-model</code> CLI command is used to
automatically generate the data migrations that you'll need when you add or
change a Domain Model.  It will inspect your DB and the existing domain models,
analyse the differences and it will generate an Alembic data migration in the
correct folder.</p>
<p>Features:</p>
<ul>
<li>detect a new Domain Model attribute / resource type</li>
<li>detect a renamed Domain Model attribute / resource type</li>
<li>detect a removed Domain Model attribute / resource type</li>
<li>detect a new Domain Model</li>
<li>detect a removed Domain Model</li>
<li>ability to ask for human input when needed</li>
</ul>
<p>Below in the documentation these features are discussed in more detail.</p>
<div class="admonition warning">
<p class="admonition-title">BACKUP DATABASE BEFORE USING THE MIGRATION!</p>
</div>
<p>Arguments</p>
<ul>
<li><code>message</code>: Message/description of the generated migration.</li>
<li><code>--test</code>: Optional boolean if you don't want to generate a migration file.</li>
<li><code>--inputs</code>: stringified dict to prefill inputs.
    The inputs and updates argument is mostly used for testing, prefilling the given inputs, here examples:<ul>
<li>new product: <code>inputs = { "new_product_name": { "description": "add description", "product_type": "add_type", "tag": "add_tag" }}</code></li>
<li>new product fixed input: <code>inputs = { "new_product_name": { "new_fixed_input_name": "value" }}</code></li>
<li>new product block: <code>inputs = { "new_product_block_name": { "description": "add description", "tag": "add_tag" } }</code></li>
<li>new resource type: <code>inputs = { "new_resource_type_name": { "description": "add description", "value": "add default value", "new_product_block_name": "add default value for block" }}</code><ul>
<li><code>new_product_block_name</code> prop inserts value specifically for that block.</li>
<li><code>value</code> prop is inserted as default for all existing instances it is added to.</li>
</ul>
</li>
</ul>
</li>
<li><code>--updates</code>: stringified dict to prefill inputs.<ul>
<li>renaming a fixed input:<ul>
<li><code>updates = { "fixed_inputs": { "product_name": { "old_fixed_input_name": "new_fixed_input_name" } } }</code></li>
</ul>
</li>
<li>renaming a resource type to a new resource type:<ul>
<li><code>inputs = { "new_resource_type_name": { "description": "add description" }}</code></li>
<li><code>updates = { "resource_types": { "old_resource_type_name": "new_resource_type_name" } }</code></li>
</ul>
</li>
<li>renaming a resource type to existing resource type: <code>updates = { "resource_types": { "old_resource_type_name": "new_resource_type_name" } }</code></li>
</ul>
</li>
</ul>
<p><strong>Example</strong></p>
<p>You need products in the <code>SUBSCRIPTION_MODEL_REGISTRY</code>, for this example I will use these models (taken out of <a href="https://github.com/workfloworchestrator/example-orchestrator-beginner">example-orchestrator</a>):</p>
<ul>
<li>
<p>UserGroup Block:
    <div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">orchestrator.domain.base</span><span class="w"> </span><span class="kn">import</span> <span class="n">SubscriptionModel</span><span class="p">,</span> <span class="n">ProductBlockModel</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">orchestrator.types</span><span class="w"> </span><span class="kn">import</span> <span class="n">SubscriptionLifecycle</span>


<span class="k">class</span><span class="w"> </span><span class="nc">UserGroupBlockInactive</span><span class="p">(</span>
    <span class="n">ProductBlockModel</span><span class="p">,</span>
    <span class="n">lifecycle</span><span class="o">=</span><span class="p">[</span><span class="n">SubscriptionLifecycle</span><span class="o">.</span><span class="n">INITIAL</span><span class="p">],</span>
    <span class="n">product_block_name</span><span class="o">=</span><span class="s2">&quot;UserGroupBlock&quot;</span><span class="p">,</span>
<span class="p">):</span>
    <span class="n">group_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">group_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>


<span class="k">class</span><span class="w"> </span><span class="nc">UserGroupBlockProvisioning</span><span class="p">(</span>
    <span class="n">UserGroupBlockInactive</span><span class="p">,</span> <span class="n">lifecycle</span><span class="o">=</span><span class="p">[</span><span class="n">SubscriptionLifecycle</span><span class="o">.</span><span class="n">PROVISIONING</span><span class="p">]</span>
<span class="p">):</span>
    <span class="n">group_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">group_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>


<span class="k">class</span><span class="w"> </span><span class="nc">UserGroupBlock</span><span class="p">(</span>
    <span class="n">UserGroupBlockProvisioning</span><span class="p">,</span> <span class="n">lifecycle</span><span class="o">=</span><span class="p">[</span><span class="n">SubscriptionLifecycle</span><span class="o">.</span><span class="n">ACTIVE</span><span class="p">]</span>
<span class="p">):</span>
    <span class="n">group_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">group_id</span><span class="p">:</span> <span class="nb">int</span>
</code></pre></div></p>
</li>
<li>
<p>UserGroup Product:
    <div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">orchestrator.domain.base</span><span class="w"> </span><span class="kn">import</span> <span class="n">SubscriptionModel</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">orchestrator.types</span><span class="w"> </span><span class="kn">import</span> <span class="n">SubscriptionLifecycle</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">products.product_blocks.user_group</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">UserGroupBlock</span><span class="p">,</span>
    <span class="n">UserGroupBlockInactive</span><span class="p">,</span>
    <span class="n">UserGroupBlockProvisioning</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">UserGroupInactive</span><span class="p">(</span>
    <span class="n">SubscriptionModel</span><span class="p">,</span> <span class="n">is_base</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">lifecycle</span><span class="o">=</span><span class="p">[</span><span class="n">SubscriptionLifecycle</span><span class="o">.</span><span class="n">INITIAL</span><span class="p">]</span>
<span class="p">):</span>
    <span class="n">settings</span><span class="p">:</span> <span class="n">UserGroupBlockInactive</span>


<span class="k">class</span><span class="w"> </span><span class="nc">UserGroupProvisioning</span><span class="p">(</span>
    <span class="n">UserGroupInactive</span><span class="p">,</span> <span class="n">lifecycle</span><span class="o">=</span><span class="p">[</span><span class="n">SubscriptionLifecycle</span><span class="o">.</span><span class="n">PROVISIONING</span><span class="p">]</span>
<span class="p">):</span>
    <span class="n">settings</span><span class="p">:</span> <span class="n">UserGroupBlockProvisioning</span>


<span class="k">class</span><span class="w"> </span><span class="nc">UserGroup</span><span class="p">(</span><span class="n">UserGroupProvisioning</span><span class="p">,</span> <span class="n">lifecycle</span><span class="o">=</span><span class="p">[</span><span class="n">SubscriptionLifecycle</span><span class="o">.</span><span class="n">ACTIVE</span><span class="p">]):</span>
    <span class="n">settings</span><span class="p">:</span> <span class="n">UserGroupBlock</span>
</code></pre></div></p>
</li>
<li>
<p>User Block:
    <div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">orchestrator.domain.base</span><span class="w"> </span><span class="kn">import</span> <span class="n">ProductBlockModel</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">orchestrator.types</span><span class="w"> </span><span class="kn">import</span> <span class="n">SubscriptionLifecycle</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">products.product_blocks.user_group</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">UserGroupBlock</span><span class="p">,</span>
    <span class="n">UserGroupBlockInactive</span><span class="p">,</span>
    <span class="n">UserGroupBlockProvisioning</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">UserBlockInactive</span><span class="p">(</span>
    <span class="n">ProductBlockModel</span><span class="p">,</span>
    <span class="n">lifecycle</span><span class="o">=</span><span class="p">[</span><span class="n">SubscriptionLifecycle</span><span class="o">.</span><span class="n">INITIAL</span><span class="p">],</span>
    <span class="n">product_block_name</span><span class="o">=</span><span class="s2">&quot;UserBlock&quot;</span><span class="p">,</span>
<span class="p">):</span>
    <span class="n">group</span><span class="p">:</span> <span class="n">UserGroupBlockInactive</span>
    <span class="n">username</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">age</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>


<span class="k">class</span><span class="w"> </span><span class="nc">UserBlockProvisioning</span><span class="p">(</span>
    <span class="n">UserBlockInactive</span><span class="p">,</span> <span class="n">lifecycle</span><span class="o">=</span><span class="p">[</span><span class="n">SubscriptionLifecycle</span><span class="o">.</span><span class="n">PROVISIONING</span><span class="p">]</span>
<span class="p">):</span>
    <span class="n">group</span><span class="p">:</span> <span class="n">UserGroupBlockProvisioning</span>
    <span class="n">username</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">age</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>


<span class="k">class</span><span class="w"> </span><span class="nc">UserBlock</span><span class="p">(</span><span class="n">UserBlockProvisioning</span><span class="p">,</span> <span class="n">lifecycle</span><span class="o">=</span><span class="p">[</span><span class="n">SubscriptionLifecycle</span><span class="o">.</span><span class="n">ACTIVE</span><span class="p">]):</span>
    <span class="n">group</span><span class="p">:</span> <span class="n">UserGroupBlock</span>
    <span class="n">username</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">age</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span>
</code></pre></div></p>
</li>
<li>
<p>User Product:
    <div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">orchestrator.domain.base</span><span class="w"> </span><span class="kn">import</span> <span class="n">SubscriptionModel</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">orchestrator.types</span><span class="w"> </span><span class="kn">import</span> <span class="n">SubscriptionLifecycle</span><span class="p">,</span> <span class="n">strEnum</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">products.product_blocks.user</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">UserBlock</span><span class="p">,</span>
    <span class="n">UserBlockInactive</span><span class="p">,</span>
    <span class="n">UserBlockProvisioning</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Affiliation</span><span class="p">(</span><span class="n">strEnum</span><span class="p">):</span>
    <span class="n">internal</span> <span class="o">=</span> <span class="s2">&quot;internal&quot;</span>
    <span class="n">external</span> <span class="o">=</span> <span class="s2">&quot;external&quot;</span>


<span class="k">class</span><span class="w"> </span><span class="nc">UserInactive</span><span class="p">(</span><span class="n">SubscriptionModel</span><span class="p">,</span> <span class="n">is_base</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">affiliation</span><span class="p">:</span> <span class="n">Affiliation</span>
    <span class="n">settings</span><span class="p">:</span> <span class="n">UserBlockInactive</span>


<span class="k">class</span><span class="w"> </span><span class="nc">UserProvisioning</span><span class="p">(</span><span class="n">UserInactive</span><span class="p">,</span> <span class="n">lifecycle</span><span class="o">=</span><span class="p">[</span><span class="n">SubscriptionLifecycle</span><span class="o">.</span><span class="n">PROVISIONING</span><span class="p">]):</span>
    <span class="n">affiliation</span><span class="p">:</span> <span class="n">Affiliation</span>
    <span class="n">settings</span><span class="p">:</span> <span class="n">UserBlockProvisioning</span>


<span class="k">class</span><span class="w"> </span><span class="nc">User</span><span class="p">(</span><span class="n">UserProvisioning</span><span class="p">,</span> <span class="n">lifecycle</span><span class="o">=</span><span class="p">[</span><span class="n">SubscriptionLifecycle</span><span class="o">.</span><span class="n">ACTIVE</span><span class="p">]):</span>
    <span class="n">affiliation</span><span class="p">:</span> <span class="n">Affiliation</span>
    <span class="n">settings</span><span class="p">:</span> <span class="n">UserBlock</span>
</code></pre></div></p>
</li>
<li>
<p><code>SUBSCRIPTION_MODEL_REGISTRY</code>:
    <div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">orchestrator.domain</span><span class="w"> </span><span class="kn">import</span> <span class="n">SUBSCRIPTION_MODEL_REGISTRY</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">products.product_types.user</span><span class="w"> </span><span class="kn">import</span> <span class="n">User</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">products.product_types.user_group</span><span class="w"> </span><span class="kn">import</span> <span class="n">UserGroup</span>

<span class="c1"># Register models to actual definitions for deserialization purposes</span>
<span class="n">SUBSCRIPTION_MODEL_REGISTRY</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
    <span class="p">{</span>
        <span class="s2">&quot;User group&quot;</span><span class="p">:</span> <span class="n">UserGroup</span><span class="p">,</span>
        <span class="s2">&quot;User internal&quot;</span><span class="p">:</span> <span class="n">User</span><span class="p">,</span>
        <span class="s2">&quot;User external&quot;</span><span class="p">:</span> <span class="n">User</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">)</span>
</code></pre></div></p>
</li>
</ul>
<p>Running the command:</p>
<ul>
<li>
<p>only with a message
    <div class="highlight"><pre><span></span><code>python<span class="w"> </span>main.py<span class="w"> </span>db<span class="w"> </span>migrate-domain-models<span class="w"> </span><span class="s2">&quot;message&quot;</span>
</code></pre></div></p>
</li>
<li>
<p>Running it as test
    <div class="highlight"><pre><span></span><code>python<span class="w"> </span>main.py<span class="w"> </span>db<span class="w"> </span>migrate-domain-models<span class="w"> </span><span class="s2">&quot;message&quot;</span><span class="w"> </span>--test
</code></pre></div></p>
</li>
<li>
<p>Running the command with inputs prefilled
    <div class="highlight"><pre><span></span><code>python<span class="w"> </span>main.py<span class="w"> </span>db<span class="w"> </span>migrate-domain-models<span class="w"> </span><span class="s2">&quot;message&quot;</span><span class="w"> </span>--inputs<span class="w"> </span><span class="s2">&quot;{ &quot;&quot; }&quot;</span>
</code></pre></div></p>
</li>
</ul>
<p>The command will first go through all products and map the differences with the database. debug log example:
<div class="highlight"><pre><span></span><code><span class="m">2022</span>-10-27<span class="w"> </span><span class="m">11</span>:45:10<span class="w"> </span><span class="o">[</span>debug<span class="o">]</span><span class="w"> </span>ProductTable<span class="w"> </span>blocks<span class="w"> </span>diff<span class="w"> </span><span class="o">[</span>orchestrator.domain.base<span class="o">]</span><span class="w"> </span><span class="nv">fixed_inputs_in_db</span><span class="o">=</span>set<span class="o">()</span><span class="w"> </span><span class="nv">fixed_inputs_model</span><span class="o">=</span>set<span class="o">()</span><span class="w"> </span><span class="nv">missing_fixed_inputs_in_db</span><span class="o">=</span>set<span class="o">()</span><span class="w"> </span><span class="nv">missing_fixed_inputs_in_model</span><span class="o">=</span>set<span class="o">()</span><span class="w"> </span><span class="nv">missing_product_blocks_in_db</span><span class="o">=</span>set<span class="o">()</span><span class="w"> </span><span class="nv">missing_product_blocks_in_model</span><span class="o">=</span>set<span class="o">()</span><span class="w"> </span><span class="nv">product_block_db</span><span class="o">=</span>User<span class="w"> </span>group<span class="w"> </span><span class="nv">product_blocks_in_db</span><span class="o">={</span><span class="s1">&#39;UserGroupBlock&#39;</span><span class="o">}</span><span class="w"> </span><span class="nv">product_blocks_in_model</span><span class="o">={</span><span class="s1">&#39;UserGroupBlock&#39;</span><span class="o">}</span>
</code></pre></div></p>
<p>You will be prompted with inputs when updates are found.</p>
<ul>
<li>
<p>rename of resource type input (renaming <code>age</code> to <code>user_age</code> in User Block). Only works when the resource type is renamed in all Blocks:</p>
<blockquote>
<p><u><strong>Update resource types</strong></u><br>
Do you wish to rename resource type <span style="color:magenta">age</span> to <span style="color:magenta">user_age</span>? [y/N]:</p>
</blockquote>
</li>
<li>
<p>rename of fixed input (renaming <code>affiliation</code> to <code>affiliationing</code> in User Product):</p>
<blockquote>
<p><u><strong>Update fixed inputs</strong></u><br>
Do you wish to rename fixed input <span style="color:magenta">affiliation</span> to <span style="color:magenta">affiliationing</span> for product <strong>User internal</strong>? [y/N]:</p>
</blockquote>
</li>
<li>
<p>update of resource type per block (renaming <code>age</code> to <code>user_age</code> in User Block and not chosing to rename resource type). The input will loop until skipped or when there are no options anymore:</p>
<ul>
<li>first you get to choose which old resource type to update, skip will create/delete all resource types.
    &gt; <u><strong>Update block resource types</strong></u><br>
    <div class="highlight"><pre><span></span><code>Which<span class="w"> </span>resource<span class="w"> </span><span class="nb">type</span><span class="w"> </span>would<span class="w"> </span>you<span class="w"> </span>want<span class="w"> </span>to<span class="w"> </span>update<span class="w"> </span><span class="k">in</span><span class="w"> </span>UserBlock<span class="w"> </span>Block?
<span class="m">1</span><span class="o">)</span><span class="w"> </span>age
q<span class="o">)</span><span class="w"> </span>skip
?
</code></pre></div></li>
<li>then you get to choose which new resource type to update with, skip will give you the first question again.
    <div class="highlight"><pre><span></span><code>Which<span class="w"> </span>resource<span class="w"> </span><span class="nb">type</span><span class="w"> </span>should<span class="w"> </span>update<span class="w"> </span>age?
<span class="m">1</span><span class="o">)</span><span class="w"> </span>user_age
q<span class="o">)</span><span class="w"> </span>skip
?
</code></pre></div></li>
<li>with 1 and 1, the log level difference would look like:
    <div class="highlight"><pre><span></span><code><span class="m">2023</span>-02-08<span class="w"> </span><span class="m">14</span>:11:25<span class="w"> </span><span class="o">[</span>info<span class="o">]</span><span class="w"> </span>update_block_resource_types<span class="w"> </span><span class="o">[</span>orchestrator.cli.migrate_domain_models<span class="o">]</span><span class="w"> </span><span class="nv">update_block_resource_types</span><span class="o">={</span><span class="s1">&#39;UserBlock&#39;</span>:<span class="w"> </span><span class="o">{</span><span class="s1">&#39;age&#39;</span>:<span class="w"> </span><span class="s1">&#39;user_age&#39;</span><span class="o">}}</span>
</code></pre></div></li>
</ul>
</li>
</ul>
<p>It will log the differences on info level:</p>
<div class="highlight"><pre><span></span><code><span class="m">2022</span>-10-27<span class="w"> </span><span class="m">11</span>:45:10<span class="w"> </span><span class="o">[</span>info<span class="o">]</span><span class="w"> </span>create_products<span class="w">                   </span><span class="o">[</span>orchestrator.cli.migrate_domain_models<span class="o">]</span><span class="w"> </span><span class="nv">create_products</span><span class="o">={</span><span class="s1">&#39;User group&#39;</span>:<span class="w"> </span>&lt;class<span class="w"> </span><span class="s1">&#39;products.product_types.user_group.UserGroup&#39;</span>&gt;,<span class="w"> </span><span class="s1">&#39;User internal&#39;</span>:<span class="w"> </span>&lt;class<span class="w"> </span><span class="s1">&#39;products.product_types.user.User&#39;</span>&gt;,<span class="w"> </span><span class="s1">&#39;User external&#39;</span>:<span class="w"> </span>&lt;class<span class="w"> </span><span class="s1">&#39;products.product_types.user.User&#39;</span>&gt;<span class="o">}</span>
<span class="m">2022</span>-10-27<span class="w"> </span><span class="m">11</span>:45:10<span class="w"> </span><span class="o">[</span>info<span class="o">]</span><span class="w"> </span>delete_products<span class="w">                   </span><span class="o">[</span>orchestrator.cli.migrate_domain_models<span class="o">]</span><span class="w"> </span><span class="nv">delete_products</span><span class="o">=</span>set<span class="o">()</span>
<span class="m">2022</span>-10-27<span class="w"> </span><span class="m">11</span>:45:10<span class="w"> </span><span class="o">[</span>info<span class="o">]</span><span class="w"> </span>create_product_fixed_inputs<span class="w">       </span><span class="o">[</span>orchestrator.cli.migrate_domain_models<span class="o">]</span><span class="w"> </span><span class="nv">create_product_fixed_inputs</span><span class="o">={</span><span class="s1">&#39;affiliation&#39;</span>:<span class="w"> </span><span class="o">{</span><span class="s1">&#39;User external&#39;</span>,<span class="w"> </span><span class="s1">&#39;User internal&#39;</span><span class="o">}}</span>
<span class="m">2022</span>-10-27<span class="w"> </span><span class="m">11</span>:45:10<span class="w"> </span><span class="o">[</span>info<span class="o">]</span><span class="w"> </span>update_product_fixed_inputs<span class="w">       </span><span class="o">[</span>orchestrator.cli.migrate_domain_models<span class="o">]</span><span class="w"> </span><span class="nv">update_product_fixed_inputs</span><span class="o">={}</span>
<span class="m">2022</span>-10-27<span class="w"> </span><span class="m">11</span>:45:10<span class="w"> </span><span class="o">[</span>info<span class="o">]</span><span class="w"> </span>delete_product_fixed_inputs<span class="w">       </span><span class="o">[</span>orchestrator.cli.migrate_domain_models<span class="o">]</span><span class="w"> </span><span class="nv">delete_product_fixed_inputs</span><span class="o">={}</span>
<span class="m">2022</span>-10-27<span class="w"> </span><span class="m">11</span>:45:10<span class="w"> </span><span class="o">[</span>info<span class="o">]</span><span class="w"> </span>create_product_to_block_relations<span class="w"> </span><span class="o">[</span>orchestrator.cli.migrate_domain_models<span class="o">]</span><span class="w"> </span><span class="nv">create_product_to_block_relations</span><span class="o">={</span><span class="s1">&#39;UserGroupBlock&#39;</span>:<span class="w"> </span><span class="o">{</span><span class="s1">&#39;User group&#39;</span><span class="o">}</span>,<span class="w"> </span><span class="s1">&#39;UserBlock&#39;</span>:<span class="w"> </span><span class="o">{</span><span class="s1">&#39;User external&#39;</span>,<span class="w"> </span><span class="s1">&#39;User internal&#39;</span><span class="o">}}</span>
<span class="m">2022</span>-10-27<span class="w"> </span><span class="m">11</span>:45:10<span class="w"> </span><span class="o">[</span>info<span class="o">]</span><span class="w"> </span>delete_product_to_block_relations<span class="w"> </span><span class="o">[</span>orchestrator.cli.migrate_domain_models<span class="o">]</span><span class="w"> </span><span class="nv">delete_product_to_block_relations</span><span class="o">={}</span>
<span class="m">2022</span>-10-27<span class="w"> </span><span class="m">11</span>:45:10<span class="w"> </span><span class="o">[</span>info<span class="o">]</span><span class="w"> </span>create_resource_types<span class="w">             </span><span class="o">[</span>orchestrator.cli.migrate_domain_models<span class="o">]</span><span class="w"> </span><span class="nv">create_resource_types</span><span class="o">={</span><span class="s1">&#39;username&#39;</span>,<span class="w"> </span><span class="s1">&#39;age&#39;</span>,<span class="w"> </span><span class="s1">&#39;group_name&#39;</span>,<span class="w"> </span><span class="s1">&#39;user_id&#39;</span>,<span class="w"> </span><span class="s1">&#39;group_id&#39;</span><span class="o">}</span>
<span class="m">2022</span>-10-27<span class="w"> </span><span class="m">11</span>:45:10<span class="w"> </span><span class="o">[</span>info<span class="o">]</span><span class="w"> </span>rename_resource_types<span class="w">             </span><span class="o">[</span>orchestrator.cli.migrate_domain_models<span class="o">]</span><span class="w"> </span><span class="nv">rename_resource_types</span><span class="o">={}</span>
<span class="m">2022</span>-10-27<span class="w"> </span><span class="m">11</span>:45:10<span class="w"> </span><span class="o">[</span>info<span class="o">]</span><span class="w"> </span>delete_resource_types<span class="w">             </span><span class="o">[</span>orchestrator.cli.migrate_domain_models<span class="o">]</span><span class="w"> </span><span class="nv">delete_resource_types</span><span class="o">=</span>set<span class="o">()</span>
<span class="m">2022</span>-10-27<span class="w"> </span><span class="m">11</span>:45:10<span class="w"> </span><span class="o">[</span>info<span class="o">]</span><span class="w"> </span>create_resource_type_relations<span class="w">    </span><span class="o">[</span>orchestrator.cli.migrate_domain_models<span class="o">]</span><span class="w"> </span><span class="nv">create_resource_type_relations</span><span class="o">={</span><span class="s1">&#39;group_name&#39;</span>:<span class="w"> </span><span class="o">{</span><span class="s1">&#39;UserGroupBlock&#39;</span><span class="o">}</span>,<span class="w"> </span><span class="s1">&#39;group_id&#39;</span>:<span class="w"> </span><span class="o">{</span><span class="s1">&#39;UserGroupBlock&#39;</span><span class="o">}</span>,<span class="w"> </span><span class="s1">&#39;username&#39;</span>:<span class="w"> </span><span class="o">{</span><span class="s1">&#39;UserBlock&#39;</span><span class="o">}</span>,<span class="w"> </span><span class="s1">&#39;age&#39;</span>:<span class="w"> </span><span class="o">{</span><span class="s1">&#39;UserBlock&#39;</span><span class="o">}</span>,<span class="w"> </span><span class="s1">&#39;user_id&#39;</span>:<span class="w"> </span><span class="o">{</span><span class="s1">&#39;UserBlock&#39;</span><span class="o">}}</span>
<span class="m">2022</span>-10-27<span class="w"> </span><span class="m">11</span>:45:10<span class="w"> </span><span class="o">[</span>info<span class="o">]</span><span class="w"> </span>delete_resource_type_relations<span class="w">    </span><span class="o">[</span>orchestrator.cli.migrate_domain_models<span class="o">]</span><span class="w"> </span><span class="nv">delete_resource_type_relations</span><span class="o">={}</span>
<span class="m">2022</span>-10-27<span class="w"> </span><span class="m">11</span>:45:10<span class="w"> </span><span class="o">[</span>info<span class="o">]</span><span class="w"> </span>create_product_blocks<span class="w">             </span><span class="o">[</span>orchestrator.cli.migrate_domain_models<span class="o">]</span><span class="w"> </span><span class="nv">create_blocks</span><span class="o">={</span><span class="s1">&#39;UserGroupBlock&#39;</span>:<span class="w"> </span>&lt;class<span class="w"> </span><span class="s1">&#39;products.product_blocks.user_group.UserGroupBlock&#39;</span>&gt;,<span class="w"> </span><span class="s1">&#39;UserBlock&#39;</span>:<span class="w"> </span>&lt;class<span class="w"> </span><span class="s1">&#39;products.product_blocks.user.UserBlock&#39;</span>&gt;<span class="o">}</span>
<span class="m">2022</span>-10-27<span class="w"> </span><span class="m">11</span>:45:10<span class="w"> </span><span class="o">[</span>info<span class="o">]</span><span class="w"> </span>delete_product_blocks<span class="w">             </span><span class="o">[</span>orchestrator.cli.migrate_domain_models<span class="o">]</span><span class="w"> </span><span class="nv">delete_blocks</span><span class="o">=</span>set<span class="o">()</span>
<span class="m">2022</span>-10-27<span class="w"> </span><span class="m">11</span>:45:10<span class="w"> </span><span class="o">[</span>info<span class="o">]</span><span class="w"> </span>create_product_block_relations<span class="w">    </span><span class="o">[</span>orchestrator.cli.migrate_domain_models<span class="o">]</span><span class="w"> </span><span class="nv">create_product_block_relations</span><span class="o">={</span><span class="s1">&#39;UserGroupBlock&#39;</span>:<span class="w"> </span><span class="o">{</span><span class="s1">&#39;UserBlock&#39;</span><span class="o">}}</span>
<span class="m">2022</span>-10-27<span class="w"> </span><span class="m">11</span>:45:10<span class="w"> </span><span class="o">[</span>info<span class="o">]</span><span class="w"> </span>delete_product_block_relations<span class="w">    </span><span class="o">[</span>orchestrator.cli.migrate_domain_models<span class="o">]</span><span class="w"> </span><span class="nv">delete_product_block_relations</span><span class="o">={}</span>
</code></pre></div>
<p>You will be asked to confirm the actions in order to continue:</p>
<blockquote>
<p><span style="color:goldenrod"><strong>WARNING:</strong></span> Deleting products will also delete its subscriptions.<br>
Confirm the above actions [y/N]:</p>
</blockquote>
<p>After confirming, it will start generating the SQL, logging the SQL on debug level and prompt the user for new resources:</p>
<ul>
<li>
<p>new product example:</p>
<blockquote>
<p><u><strong>Create new products</strong></u><br>
Product: UserGroup <strong>User group</strong><br>
Supply the production description: User group product<br>
Supply the product tag: GROUP<br>
<div class="highlight"><pre><span></span><code><span class="mi">2022</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">27</span><span class="w"> </span><span class="mi">11</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">10</span><span class="w"> </span><span class="p">[</span><span class="n">debug</span><span class="p">]</span><span class="w"> </span><span class="k">generated</span><span class="w"> </span><span class="k">SQL</span><span class="w"> </span><span class="p">[</span><span class="n">orchestrator</span><span class="p">.</span><span class="n">cli</span><span class="p">.</span><span class="n">domain_gen_helpers</span><span class="p">.</span><span class="n">helpers</span><span class="p">]</span><span class="w"> </span><span class="n">sql_string</span><span class="o">=</span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">products</span><span class="w"> </span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="p">,</span><span class="w"> </span><span class="n">product_type</span><span class="p">,</span><span class="w"> </span><span class="n">tag</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;User group&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;User group product&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;UserGroup&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;GROUP&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;active&#39;</span><span class="p">)</span><span class="w"> </span><span class="n">RETURNING</span><span class="w"> </span><span class="n">products</span><span class="p">.</span><span class="n">product_id</span>
</code></pre></div></p>
</blockquote>
</li>
<li>
<p>new fixed input (the type isn't checked, so typing an incorrect value will insert in db):</p>
<blockquote>
<p><u><strong>Create fixed inputs</strong></u><br>
Supply fixed input value for product <strong>User internal</strong> and fixed input <span style="color:magenta">affiliation</span>: internal<br>
Supply fixed input value for product <strong>User external</strong> and fixed input <span style="color:magenta">affiliation</span>: external<br>
<div class="highlight"><pre><span></span><code><span class="mi">2022</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">27</span><span class="w"> </span><span class="mi">11</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">10</span><span class="w"> </span><span class="p">[</span><span class="n">debug</span><span class="p">]</span><span class="w"> </span><span class="k">generated</span><span class="w"> </span><span class="k">SQL</span><span class="w"> </span><span class="p">[</span><span class="n">orchestrator</span><span class="p">.</span><span class="n">cli</span><span class="p">.</span><span class="n">domain_gen_helpers</span><span class="p">.</span><span class="n">helpers</span><span class="p">]</span><span class="w"> </span><span class="n">sql_string</span><span class="o">=</span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">fixed_inputs</span><span class="w"> </span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">product_id</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;affiliation&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;internal&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="n">products</span><span class="p">.</span><span class="n">product_id</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">products</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">products</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;User internal&#39;</span><span class="p">))),</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;affiliation&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;external&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="n">products</span><span class="p">.</span><span class="n">product_id</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">products</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">products</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;User external&#39;</span><span class="p">)))</span>
</code></pre></div></p>
</blockquote>
</li>
<li>
<p>new product block:</p>
<blockquote>
<p><u><strong>Create product blocks</strong></u><br>
Product block: <strong>UserGroupBlock</strong><br>
Supply the product block description: User group settings<br>
Supply the product block tag: UGS<br>
<div class="highlight"><pre><span></span><code><span class="mi">2022</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">27</span><span class="w"> </span><span class="mi">11</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">10</span><span class="w"> </span><span class="p">[</span><span class="n">debug</span><span class="p">]</span><span class="w"> </span><span class="k">generated</span><span class="w"> </span><span class="k">SQL</span><span class="w"> </span><span class="p">[</span><span class="n">orchestrator</span><span class="p">.</span><span class="n">cli</span><span class="p">.</span><span class="n">domain_gen_helpers</span><span class="p">.</span><span class="n">helpers</span><span class="p">]</span><span class="w"> </span><span class="n">sql_string</span><span class="o">=`#!</span><span class="k">sql</span><span class="w"> </span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">product_blocks</span><span class="w"> </span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="p">,</span><span class="w"> </span><span class="n">tag</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;UserGroupBlock&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;User group settings&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;UGS&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;active&#39;</span><span class="p">)</span><span class="w"> </span><span class="n">RETURNING</span><span class="w"> </span><span class="n">product_blocks</span><span class="p">.</span><span class="n">product_block_id</span><span class="o">`</span>
</code></pre></div></p>
</blockquote>
</li>
<li>
<p>new resource type:</p>
<blockquote>
<p><u><strong>Create resource types</strong></u><br>
Supply description for new resource type <span style="color:magenta">group_name</span>: Unique name of user group
<div class="highlight"><pre><span></span><code><span class="mi">2022</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">27</span><span class="w"> </span><span class="mi">11</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">10</span><span class="w"> </span><span class="p">[</span><span class="n">debug</span><span class="p">]</span><span class="w"> </span><span class="k">generated</span><span class="w"> </span><span class="k">SQL</span><span class="w"> </span><span class="p">[</span><span class="n">orchestrator</span><span class="p">.</span><span class="n">cli</span><span class="p">.</span><span class="n">domain_gen_helpers</span><span class="p">.</span><span class="n">helpers</span><span class="p">]</span><span class="w"> </span><span class="n">sql_string</span><span class="o">=</span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">resource_types</span><span class="w"> </span><span class="p">(</span><span class="n">resource_type</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;group_name&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Unique name of user group&#39;</span><span class="p">)</span><span class="w"> </span><span class="n">RETURNING</span><span class="w"> </span><span class="n">resource_types</span><span class="p">.</span><span class="n">resource_type_id</span>
</code></pre></div></p>
</blockquote>
</li>
<li>
<p>default value for resource type per product block (necessary for adding a default value to existing instances):</p>
<blockquote>
<p><u><strong>Create subscription instance values</strong></u><br>
Supply default subscription instance value for resource type <span style="color:magenta">group_name</span> and product block <strong>UserGroupBlock</strong>: group
<div class="highlight"><pre><span></span><code><span class="mi">2022</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">27</span><span class="w"> </span><span class="mi">11</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">10</span><span class="w"> </span><span class="p">[</span><span class="n">debug</span><span class="p">]</span><span class="w"> </span><span class="k">generated</span><span class="w"> </span><span class="k">SQL</span><span class="w"> </span><span class="p">[</span><span class="n">orchestrator</span><span class="p">.</span><span class="n">cli</span><span class="p">.</span><span class="n">domain_gen_helpers</span><span class="p">.</span><span class="n">resource_type_helpers</span><span class="p">]</span><span class="w"> </span><span class="n">sql_string</span><span class="o">=</span>
<span class="w">                </span><span class="k">WITH</span><span class="w"> </span><span class="n">subscription_instance_ids</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="p">(</span>
<span class="w">                    </span><span class="k">SELECT</span><span class="w"> </span><span class="n">subscription_instances</span><span class="p">.</span><span class="n">subscription_instance_id</span>
<span class="w">                    </span><span class="k">FROM</span><span class="w">   </span><span class="n">subscription_instances</span>
<span class="w">                    </span><span class="k">WHERE</span><span class="w">  </span><span class="n">subscription_instances</span><span class="p">.</span><span class="n">product_block_id</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="p">(</span>
<span class="w">                        </span><span class="k">SELECT</span><span class="w"> </span><span class="n">product_blocks</span><span class="p">.</span><span class="n">product_block_id</span>
<span class="w">                        </span><span class="k">FROM</span><span class="w">   </span><span class="n">product_blocks</span>
<span class="w">                        </span><span class="k">WHERE</span><span class="w">  </span><span class="n">product_blocks</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;UserGroupBlock&#39;</span>
<span class="w">                    </span><span class="p">)</span>
<span class="w">                </span><span class="p">)</span>

<span class="w">                </span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span>
<span class="w">                    </span><span class="n">subscription_instance_values</span><span class="w"> </span><span class="p">(</span><span class="n">subscription_instance_id</span><span class="p">,</span><span class="w"> </span><span class="n">resource_type_id</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">)</span>
<span class="w">                </span><span class="k">SELECT</span>
<span class="w">                    </span><span class="n">subscription_instance_ids</span><span class="p">.</span><span class="n">subscription_instance_id</span><span class="p">,</span>
<span class="w">                    </span><span class="n">resource_types</span><span class="p">.</span><span class="n">resource_type_id</span><span class="p">,</span>
<span class="w">                    </span><span class="s1">&#39;group&#39;</span>
<span class="w">                </span><span class="k">FROM</span><span class="w"> </span><span class="n">resource_types</span>
<span class="w">                </span><span class="k">CROSS</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">subscription_instance_ids</span>
<span class="w">                </span><span class="k">WHERE</span><span class="w"> </span><span class="n">resource_types</span><span class="p">.</span><span class="n">resource_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;group_name&#39;</span>
</code></pre></div></p>
</blockquote>
</li>
</ul>
<p>Last part generates the migration with the generated SQL:
<div class="highlight"><pre><span></span><code>Generating migration file
2022-10-27 11:45:10 [info] Version Locations [orchestrator.cli.database] locations=/home/tjeerddie/projects_surf/example-orchestrator/migrations/versions/schema /home/tjeerddie/projects_surf/example-orchestrator/.venv/lib/python3.10/site-packages/orchestrator/migrations/versions/schema
  Generating /home/tjeerddie/projects_surf/example-orchestrator/migrations/versions/schema/2022-10-27_a8946b2d1647_test.py ...  done
Migration generated. Don&#39;t forget to create a database backup before migrating!
</code></pre></div></p>
<p>If you are running with <code>--test</code>, the SQL file will not be generated.</p>
<h2 id="generate">generate</h2>
<p>Generate products, workflows and other artifacts.</p>
<p>Products can be described in a <abbr title="YAML Ain't Markup Language">YAML</abbr> configuration file which makes it easy to
generate product and product block domain models, and skeleton workflows and
unit tests. Note that this is a one time thing, the generate commands do not
support updating existing products, product-blocks, workflows and migrations,
in this case have a look at the <code>db migrate-domain-models</code> and <code>db migrate-workflows</code> commands.
But it does however help in defining new products with stakeholders, will
generate code that conforms to current workfloworchestrator coding BCP, and
will actually run (although limited in functionality of course).</p>
<p>After describing a new product in a configuration file, the following commands
are typically run:</p>
<div class="highlight"><pre><span></span><code>python<span class="w"> </span>main.py<span class="w"> </span>generate<span class="w"> </span>product-blocks
python<span class="w"> </span>main.py<span class="w"> </span>generate<span class="w"> </span>products
python<span class="w"> </span>main.py<span class="w"> </span>generate<span class="w"> </span>workflows
python<span class="w"> </span>main.py<span class="w"> </span>generate<span class="w"> </span>migration
</code></pre></div>
<p>The generate command should be called from the top level folder of your orchestrator
implementation, this is the folder that contains the <code>products</code> sub folder, amongst others, except when
the <code>--prefix</code> is used to point to that folder. In case there are product blocks defined that use other
generated product blocks, the order in which <code>generate product-blocks</code> is run is important,
the code for the blocks used in other blocks should be generated first.</p>
<h3 id="config-file">config file</h3>
<!-- TODO: this should be moved to Guides -->

<p>An example of a simple product configuration:</p>
<div class="highlight"><pre><span></span><code><span class="nt">config</span><span class="p">:</span>
<span class="w">  </span><span class="nt">summary_forms</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">node</span>
<span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Node</span>
<span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NODE</span>
<span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Network</span><span class="nv"> </span><span class="s">node&quot;</span>
<span class="nt">fixed_inputs</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">node_rack_mountable</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bool</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;is</span><span class="nv"> </span><span class="s">node</span><span class="nv"> </span><span class="s">rack</span><span class="nv"> </span><span class="s">mountable&quot;</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">node_vendor</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">enum</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;vendor</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">node&quot;</span>
<span class="w">    </span><span class="nt">enum_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">str</span>
<span class="w">    </span><span class="nt">values</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;Cisco&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;Nokia&quot;</span>
<span class="nt">product_blocks</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">node</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Node</span>
<span class="w">    </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NODE</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;node</span><span class="nv"> </span><span class="s">product</span><span class="nv"> </span><span class="s">block&quot;</span>
<span class="w">    </span><span class="nt">fields</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">node_name</span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Unique</span><span class="nv"> </span><span class="s">name</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">node&quot;</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">str</span>
<span class="w">        </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">provisioning</span>
<span class="w">        </span><span class="nt">modifiable</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">node_description</span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Description</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">node&quot;</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">str</span>
<span class="w">        </span><span class="nt">modifiable</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ims_id</span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ID</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">node</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">inventory</span><span class="nv"> </span><span class="s">management</span><span class="nv"> </span><span class="s">system&quot;</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">int</span>
<span class="w">        </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">active</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">under_maintenance</span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;node</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">under</span><span class="nv"> </span><span class="s">maintenance&quot;</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bool</span>
<span class="w">        </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">initial</span>
<span class="w">        </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>

<span class="nt">workflows</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">terminate</span>
<span class="w">    </span><span class="nt">validations</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">can_only_terminate_when_under_maintenance</span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Can</span><span class="nv"> </span><span class="s">only</span><span class="nv"> </span><span class="s">terminate</span><span class="nv"> </span><span class="s">when</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">node</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">placed</span><span class="nv"> </span><span class="s">under</span><span class="nv"> </span><span class="s">maintenance&quot;</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">validate</span>
<span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="nt">validations</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">validate_ims_administration</span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Validate</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">node</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">correctly</span><span class="nv"> </span><span class="s">administered</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">IMS&quot;</span>
</code></pre></div>
<p>Next we will describe the different sections in more detail:</p>
<h4 id="global-config-section">global <code>config</code> section</h4>
<p>This section sets some global configuration, applicable for most workflows.</p>
<div class="highlight"><pre><span></span><code><span class="nt">config</span><span class="p">:</span>
<span class="w">  </span><span class="nt">summary_forms</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div>
<ul>
<li><code>summary_forms</code> indicates if a summary form will be generated in the
  create and modify workflows, default is <code>false</code>.</li>
</ul>
<h4 id="product-type-definition">product type definition</h4>
<div class="highlight"><pre><span></span><code><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">node</span>
<span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Node</span>
<span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NODE</span>
<span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Network</span><span class="nv"> </span><span class="s">node&quot;</span>
</code></pre></div>
<p>Every product type is described using the following fields:
- <code>name</code>: the name of type product type, used in descriptions, as variable name, and to generate
          filenames
- <code>type</code>: used to indicate the type of the product in Python code, types in
          Python usually starts with an uppercase character
- <code>tag</code>: used to register the product tag in the database, can for example be used to filter
         products, will typically be all uppercase
- <code>description</code>: descriptive text for the product type</p>
<h4 id="fixed_inputs-section"><code>fixed_inputs</code> section</h4>
<p>In this section we define a list of fixed inputs for a product.</p>
<div class="highlight"><pre><span></span><code><span class="nt">fixed_inputs</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">node_vendor</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">enum</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;vendor</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">node&quot;</span>
<span class="w">    </span><span class="nt">enum_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">str</span>
<span class="w">    </span><span class="nt">values</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;Cisco&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;Nokia&quot;</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">node_ports</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">enum</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;number</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">ports</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">chassis&quot;</span>
<span class="w">    </span><span class="nt">values</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">40</span>
</code></pre></div>
<p>A fixed input has a <code>name</code>, <code>type</code> and <code>description</code> field. If the type is a primitive type
(for example: str, bool, int), then this is sufficient. In case of
<code>node_vendor</code> an <code>enum</code> type is used, and two additional fields to describe the
enumeration <code>type</code> and its possible <code>values</code>. Both <code>str</code> and <code>int</code> enums are supported.</p>
<p>When one or more enum types are specified, the necessary migration and product registry code
will be generated for all possible combinations of the enums. In this example six products of type
Node will
be generated: "Cisco 10", "Cisco 20", "Cisco 40", "Nokia 10", "Nokia 20" and "Nokia 40".</p>
<h4 id="product_blocks-section"><code>product_blocks</code> section</h4>
<div class="highlight"><pre><span></span><code><span class="nt">product_blocks</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Port</span>
<span class="w">    </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PORT</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;port</span><span class="nv"> </span><span class="s">product</span><span class="nv"> </span><span class="s">block&quot;</span>
<span class="w">    </span><span class="nt">fields</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span>
<span class="w">      </span><span class="p p-Indicator">-</span>
</code></pre></div>
<p>In this section we define the product block(s) that are part of this product.</p>
<p><strong>A product configuration should contain exactly 1 root product block.</strong> This means there should be 1 product block that is not used by any other product blocks within this product.
If the configuration does contain multiple root blocks, or none at all due to a cyclic dependency, then the generator will raise a helpful error.</p>
<p>The use of <code>name</code>, <code>type</code>, <code>tag</code> and <code>description</code> in the product block definition is equivalent
to the product definition above. The <code>fields</code> describe the product block resource types.</p>
<h4 id="product-block-fields">product block fields</h4>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port_mode</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;port</span><span class="nv"> </span><span class="s">mode&#39;</span>
<span class="w">    </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">provisioning</span>
<span class="w">    </span><span class="nt">modifiable</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">enum</span>
<span class="w">    </span><span class="nt">enum_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">str</span>
<span class="w">    </span><span class="nt">values</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;untagged&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;tagged&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;link_member&quot;</span>
<span class="w">    </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;tagged&quot;</span>
<span class="w">    </span><span class="nt">validations</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">must_be_unused_to_change_mode</span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Mode</span><span class="nv"> </span><span class="s">can</span><span class="nv"> </span><span class="s">only</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">changed</span><span class="nv"> </span><span class="s">when</span><span class="nv"> </span><span class="s">there</span><span class="nv"> </span><span class="s">are</span><span class="nv"> </span><span class="s">no</span><span class="nv"> </span><span class="s">services</span><span class="nv"> </span><span class="s">attached</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">it&quot;</span>
</code></pre></div>
<p>Resource types are described by the following:</p>
<ul>
<li><code>name</code>: name of the resource type, usually in snake case</li>
<li><code>decription</code>: resource type description</li>
<li><code>required</code>: if the resource type is required starting from lifecycle state <code>inital</code>, <code>provisioning</code>
              or <code>active</code>, when omitted the resource type will always be optional</li>
<li><code>modifiable</code>: indicate if the resource type can be altered by a modify workflow, when omitted
                no code will be generated to modify the resource type, currently only supported for simple types</li>
<li><code>default</code>: specify the default for this resource type, this is mandatory when <code>required</code> is set to
             <code>intitial</code>, will be <code>None</code> if not specified</li>
<li><code>validations</code>: specify the validation <code>id</code> and <code>description</code>, generates a skeleton
                 validation function used in a new annotated type</li>
<li><code>type</code>: see explanation below</li>
</ul>
<h4 id="resource-type-types">resource type types</h4>
<p>The following types are supported when specifying resource types:</p>
<ul>
<li>primitive types like <code>int</code>, <code>str</code>, and <code>bool</code>
  <div class="highlight"><pre><span></span><code><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">circuit_id</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">int</span>
</code></pre></div></li>
<li>types with a period in there name will generate code to import that type, e.q. <code>ipaddress.IPv4Address</code>
  <div class="highlight"><pre><span></span><code><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ipv4_loopback</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ipaddress.IPv4Address</span>
</code></pre></div></li>
<li>existing product block types like <code>UserGroup</code>, possible types will be read from <code>products/product_blocks</code>
  <div class="highlight"><pre><span></span><code><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">group</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">UserGroup</span>
</code></pre></div></li>
<li>the type <code>list</code>, used together with <code>min_items</code> and <code>max_items</code> to specify the constraints, and
  <code>list_type</code> to specify the type of the list items
  <div class="highlight"><pre><span></span><code><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">link_members</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">list</span>
<span class="w">  </span><span class="nt">list_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Link</span>
<span class="w">  </span><span class="nt">min_items</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">  </span><span class="nt">max_items</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
</code></pre></div></li>
<li>validation code for constrained a <code>int</code> is generated when <code>min_value</code> and <code>max_value</code> are specified
  <div class="highlight"><pre><span></span><code><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ims_id</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">int</span>
<span class="w">    </span><span class="nt">min_value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">    </span><span class="nt">max_value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">32_767</span>
</code></pre></div></li>
</ul>
<h4 id="workflows">workflows</h4>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">create</span>
<span class="w">    </span><span class="nt">validations</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">endpoints_cannot_be_on_same_node</span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Service</span><span class="nv"> </span><span class="s">endpoints</span><span class="nv"> </span><span class="s">must</span><span class="nv"> </span><span class="s">land</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">different</span><span class="nv"> </span><span class="s">nodes&quot;</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">validate</span>
<span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="nt">validations</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">validate_ims_administration</span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Validate</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">node</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">correctly</span><span class="nv"> </span><span class="s">administered</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">IMS&quot;</span>
</code></pre></div>
<p>The following optional workflow configuration is supported:</p>
<ul>
<li><code>name</code>: can be either <code>create</code>, <code>modify</code>, <code>terminate</code> or <code>validate</code></li>
<li><code>enabled</code>: to enable or disable the generation of code for that type of workflow, is <code>true</code> when omitted</li>
<li><code>validations</code>: list of validations used to generate skeleton code as <code>model_validator</code> in input forms,
  and validation steps in the validate workflow</li>
</ul>
<h3 id="migration">migration</h3>
<p>The <code>python main.py generate migration</code> command creates a migration from a
configuration file.</p>
<p>Options</p>
<!--- do not remove the two spaces at the end of each line below, they generate line breaks --->
<p>--config-file - The configuration file [default: None]<br />
--python-version - Python version for generated code [default: 3.11]<br />
--skip-existing-blocks - If set, the migration will not contain product blocks for which a python implementation exists [default: False]  </p>
<h3 id="product">product</h3>
<p>The <code>python main.py generate product</code> command creates a product domain model
from a configuration file.</p>
<p>Options</p>
<!--- do not remove the two spaces at the end of each line below, they generate line breaks --->
<p>--config-file - The configuration file [default: None]<br />
--dryrun | --no-dryrun - Dry run [default: dryrun]<br />
--force - Force overwrite of existing files<br />
--python-version - Python version for generated code [default: 3.11]<br />
--folder-prefix - Folder prefix, e.g. <folder-prefix>/workflows [default: None]  </p>
<h3 id="product-blocks">product-blocks</h3>
<p>The <code>python main.py generate product-blocks</code> command creates product block
domain models from a configuration file.</p>
<p>Options</p>
<!--- do not remove the two spaces at the end of each line below, they generate line breaks --->
<p>--config-file - The configuration file [default: None]<br />
--dryrun | --no-dryrun - Dry run [default: dryrun]<br />
--force - Force overwrite of existing files<br />
--python-version - Python version for generated code [default: 3.11]<br />
--folder-prefix - Folder prefix, e.g. <folder-prefix>/workflows [default: None]  </p>
<h3 id="unit-tests">unit-tests</h3>
<p>The <code>python main.py generate unit-tests</code> command creates unit tests from a
configuration file.</p>
<p>Options</p>
<!--- do not remove the two spaces at the end of each line below, they generate line breaks --->
<p>--config-file - The configuration file [default: None]<br />
--dryrun | --no-dryrun - Dry run [default: dryrun]<br />
--force - Force overwrite of existing files<br />
--python-version - Python version for generated code [default: 3.11]<br />
--tdd - Force test driven development with failing asserts [default: True]  </p>
<h3 id="workflows_1">workflows</h3>
<p>The <code>python main.py generate workflows</code> command creates create, modify,
terminate and validate workflows from a configuration file. The
<code>--custom-templates</code> option can be used to specify a folder with custom
templates to add additional import statements, input form fields and workflow
steps to the create, modify and terminate workflows.</p>
<p>Options</p>
<!--- do not remove the two spaces at the end of each line below, they generate line breaks --->
<p>--config-file - The configuration file [default: None]<br />
--dryrun | --no-dryrun - Dry run [default: dryrun]<br />
--force - Force overwrite of existing files<br />
--python-version - Python version for generated code [default: 3.11]<br />
--folder-prefix - Folder prefix, e.g. <folder-prefix>/workflows [default:<br />
None]
--custom-templates - Custom templates folder [default: None]</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code>workflows/__init__.py</code> will only be extended with the needed <code>LazyWorkflowInstance</code>
declarations when <code>--force</code> is used.</p>
</div>
<h2 id="scheduler">scheduler</h2>
<p>Commands to interact with the scheduler and scheduled jobs.</p>


<div class="doc doc-object doc-module">




    <div class="doc doc-contents first">










<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="orchestrator.cli.scheduler.run" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Starts the scheduler in the foreground.</p>
<p>While running, this process will:</p>
<ul>
<li>Periodically wake up when the next schedule is due for execution, and run it</li>
<li>Process schedule changes made through the schedule API</li>
</ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>orchestrator/cli/scheduler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Starts the scheduler in the foreground.</span>

<span class="sd">    While running, this process will:</span>

<span class="sd">      * Periodically wake up when the next schedule is due for execution, and run it</span>
<span class="sd">      * Process schedule changes made through the schedule API</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_scheduled_task_item_from_queue</span><span class="p">(</span><span class="n">redis_conn</span><span class="p">:</span> <span class="n">Redis</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get an item from the Redis Queue for scheduler tasks.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">redis_conn</span><span class="o">.</span><span class="n">brpop</span><span class="p">(</span><span class="n">SCHEDULER_QUEUE</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ConnectionError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;There was a connection error with Redis. Retrying in 3 seconds... </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;There was an unexpected error with Redis. Retrying in 1 second... </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">with</span> <span class="n">get_scheduler</span><span class="p">()</span> <span class="k">as</span> <span class="n">scheduler_connection</span><span class="p">:</span>
        <span class="n">redis_connection</span> <span class="o">=</span> <span class="n">create_redis_client</span><span class="p">(</span><span class="n">app_settings</span><span class="o">.</span><span class="n">CACHE_URI</span><span class="p">)</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">_get_scheduled_task_item_from_queue</span><span class="p">(</span><span class="n">redis_connection</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">item</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="k">with</span> <span class="n">db</span><span class="o">.</span><span class="n">database_scope</span><span class="p">():</span>
                <span class="n">workflow_scheduler_queue</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">scheduler_connection</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="orchestrator.cli.scheduler.force" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">force</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Force the execution of (a) scheduler(s) based on a schedule ID.</p>
<p>Use the <code>show-schedule</code> command to determine the ID of the schedule to execute.</p>


<details class="cli-arguments" open>
  <summary>CLI Arguments</summary>
  <div class="highlight"><pre><span></span><code>Arguments:
<span class="w">    </span>SCHEDULE_ID<span class="w">  </span>ID<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>schedule<span class="w"> </span>to<span class="w"> </span>execute
</code></pre></div>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>orchestrator/cli/scheduler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">force</span><span class="p">(</span><span class="n">task_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Force the execution of (a) scheduler(s) based on a schedule ID.</span>

<span class="sd">    Use the `show-schedule` command to determine the ID of the schedule to execute.</span>

<span class="sd">    CLI Arguments:</span>
<span class="sd">        ```sh</span>
<span class="sd">        Arguments:</span>
<span class="sd">            SCHEDULE_ID  ID of the schedule to execute</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">task</span> <span class="o">=</span> <span class="n">get_scheduler_task</span><span class="p">(</span><span class="n">task_id</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">task</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Task &#39;</span><span class="si">{</span><span class="n">task_id</span><span class="si">}</span><span class="s2">&#39; not found.&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Running Task [</span><span class="si">{</span><span class="n">task</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">] now...&quot;</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">task</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">task</span><span class="o">.</span><span class="n">args</span> <span class="ow">or</span> <span class="p">(),</span> <span class="o">**</span><span class="n">task</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">or</span> <span class="p">{})</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s2">&quot;Task executed successfully.&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Task execution failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">typer</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="orchestrator.cli.scheduler.show_schedule" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">show_schedule</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>The <code>show-schedule</code> command shows an overview of the scheduled jobs.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>orchestrator/cli/scheduler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">show_schedule</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The `show-schedule` command shows an overview of the scheduled jobs.&quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">rich.console</span><span class="w"> </span><span class="kn">import</span> <span class="n">Console</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">rich.table</span><span class="w"> </span><span class="kn">import</span> <span class="n">Table</span>

    <span class="kn">from</span><span class="w"> </span><span class="nn">orchestrator.schedules.service</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_linker_entries_by_schedule_ids</span>

    <span class="n">console</span> <span class="o">=</span> <span class="n">Console</span><span class="p">()</span>

    <span class="n">table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Scheduled Tasks&quot;</span><span class="p">)</span>
    <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">no_wrap</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
    <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;source&quot;</span><span class="p">)</span>
    <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;next run time&quot;</span><span class="p">)</span>
    <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;trigger&quot;</span><span class="p">)</span>

    <span class="n">scheduled_tasks</span> <span class="o">=</span> <span class="n">get_all_scheduler_tasks</span><span class="p">()</span>
    <span class="n">_schedule_ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">task</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">scheduled_tasks</span><span class="p">]</span>
    <span class="n">api_managed</span> <span class="o">=</span> <span class="p">{</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">schedule_id</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">get_linker_entries_by_schedule_ids</span><span class="p">(</span><span class="n">_schedule_ids</span><span class="p">)}</span>

    <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">scheduled_tasks</span><span class="p">:</span>
        <span class="n">source</span> <span class="o">=</span> <span class="s2">&quot;API&quot;</span> <span class="k">if</span> <span class="n">task</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="n">api_managed</span> <span class="k">else</span> <span class="s2">&quot;decorator&quot;</span>
        <span class="n">run_time</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">task</span><span class="o">.</span><span class="n">next_run_time</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">microsecond</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="n">task</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">task</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">run_time</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">task</span><span class="o">.</span><span class="n">trigger</span><span class="p">))</span>

    <span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="orchestrator.cli.scheduler.load_initial_schedule" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_initial_schedule</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>The <code>load-initial-schedule</code> command loads the initial schedule using the scheduler API.</p>


<details class="the-initial-schedules-are" open>
  <summary>The initial schedules are</summary>
  <ul>
<li>Task Resume Workflows</li>
<li>Task Clean Up Tasks</li>
<li>Task Validate Subscriptions</li>
</ul>
</details>        <p>This command is idempotent since 4.7.1 when the scheduler is running. The schedules are only
created when they do not already exist in the database.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>orchestrator/cli/scheduler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">load_initial_schedule</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The `load-initial-schedule` command loads the initial schedule using the scheduler API.</span>

<span class="sd">    The initial schedules are:</span>
<span class="sd">      - Task Resume Workflows</span>
<span class="sd">      - Task Clean Up Tasks</span>
<span class="sd">      - Task Validate Subscriptions</span>

<span class="sd">    This command is idempotent since 4.7.1 when the scheduler is running. The schedules are only</span>
<span class="sd">    created when they do not already exist in the database.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">initial_schedules</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Task Resume Workflows&quot;</span><span class="p">,</span>
            <span class="s2">&quot;workflow_name&quot;</span><span class="p">:</span> <span class="s2">&quot;task_resume_workflows&quot;</span><span class="p">,</span>
            <span class="s2">&quot;workflow_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;trigger&quot;</span><span class="p">:</span> <span class="s2">&quot;interval&quot;</span><span class="p">,</span>
            <span class="s2">&quot;trigger_kwargs&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;hours&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Task Clean Up Tasks&quot;</span><span class="p">,</span>
            <span class="s2">&quot;workflow_name&quot;</span><span class="p">:</span> <span class="s2">&quot;task_clean_up_tasks&quot;</span><span class="p">,</span>
            <span class="s2">&quot;workflow_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;trigger&quot;</span><span class="p">:</span> <span class="s2">&quot;interval&quot;</span><span class="p">,</span>
            <span class="s2">&quot;trigger_kwargs&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;hours&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">},</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Task Validate Subscriptions&quot;</span><span class="p">,</span>
            <span class="s2">&quot;workflow_name&quot;</span><span class="p">:</span> <span class="s2">&quot;task_validate_subscriptions&quot;</span><span class="p">,</span>
            <span class="s2">&quot;workflow_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;trigger&quot;</span><span class="p">:</span> <span class="s2">&quot;cron&quot;</span><span class="p">,</span>
            <span class="s2">&quot;trigger_kwargs&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;hour&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;minute&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span>
        <span class="p">},</span>
    <span class="p">]</span>

    <span class="k">for</span> <span class="n">schedule</span> <span class="ow">in</span> <span class="n">initial_schedules</span><span class="p">:</span>
        <span class="c1"># enrich with workflow id</span>
        <span class="n">workflow_name</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">schedule</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;workflow_name&quot;</span><span class="p">))</span>
        <span class="n">workflow</span> <span class="o">=</span> <span class="n">get_workflow_by_name</span><span class="p">(</span><span class="n">workflow_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">workflow</span><span class="p">:</span>
            <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Workflow &#39;</span><span class="si">{</span><span class="n">schedule</span><span class="p">[</span><span class="s1">&#39;workflow_name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39; not found. Skipping schedule.&quot;</span><span class="p">)</span>
            <span class="k">continue</span>

        <span class="n">schedule</span><span class="p">[</span><span class="s2">&quot;workflow_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">workflow</span><span class="o">.</span><span class="n">workflow_id</span>

        <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Initial Schedule: </span><span class="si">{</span><span class="n">schedule</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">add_unique_scheduled_task_to_queue</span><span class="p">(</span><span class="n">APSchedulerJobCreate</span><span class="p">(</span><span class="o">**</span><span class="n">schedule</span><span class="p">))</span>  <span class="c1"># type: ignore</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2018 - 2024 Workflow Orchestrator Programme
    </div>
  
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="https://discord.gg/fQkQn5ajFR" target="_blank" rel="noopener" title="WFO on Discord!" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M492.5 69.8c-.2-.3-.4-.6-.8-.7-38.1-17.5-78.4-30-119.7-37.1-.4-.1-.8 0-1.1.1s-.6.4-.8.8c-5.5 9.9-10.5 20.2-14.9 30.6-44.6-6.8-89.9-6.8-134.4 0-4.5-10.5-9.5-20.7-15.1-30.6-.2-.3-.5-.6-.8-.8s-.7-.2-1.1-.2C162.5 39 122.2 51.5 84.1 69c-.3.1-.6.4-.8.7C7.1 183.5-13.8 294.6-3.6 404.2c0 .3.1.5.2.8s.3.4.5.6c44.4 32.9 94 58 146.8 74.2.4.1.8.1 1.1 0s.7-.4.9-.7c11.3-15.4 21.4-31.8 30-48.8.1-.2.2-.5.2-.8s0-.5-.1-.8-.2-.5-.4-.6-.4-.3-.7-.4c-15.8-6.1-31.2-13.4-45.9-21.9-.3-.2-.5-.4-.7-.6s-.3-.6-.3-.9 0-.6.2-.9.3-.5.6-.7c3.1-2.3 6.2-4.7 9.1-7.1.3-.2.6-.4.9-.4s.7 0 1 .1c96.2 43.9 200.4 43.9 295.5 0 .3-.1.7-.2 1-.2s.7.2.9.4c2.9 2.4 6 4.9 9.1 7.2.2.2.4.4.6.7s.2.6.2.9-.1.6-.3.9-.4.5-.6.6c-14.7 8.6-30 15.9-45.9 21.8-.2.1-.5.2-.7.4s-.3.4-.4.7-.1.5-.1.8.1.5.2.8c8.8 17 18.8 33.3 30 48.8.2.3.6.6.9.7s.8.1 1.1 0c52.9-16.2 102.6-41.3 147.1-74.2.2-.2.4-.4.5-.6s.2-.5.2-.8c12.3-126.8-20.5-236.9-86.9-334.5zm-302 267.7c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.4 59.2-52.8 59.2m195.4 0c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.2 59.2-52.8 59.2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["search.suggest", "search.highlight", "navigation.tabs", "navigation.tabs.sticky", "navigation.tracking", "navigation.instant", "navigation.indexes", "content.code.copy", "content.code.annotate", "content.tooltips", "header.autohide"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../../js/termynal.js"></script>
      
        <script src="../../js/custom.js"></script>
      
        <script src="../../js/open_in_new_tab.js"></script>
      
    
  </body>
</html>